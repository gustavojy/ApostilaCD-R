<!DOCTYPE html>
<html lang="pt-BR" xml:lang="pt-BR">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo7 Visualização | Introdução à Ciência de Dados em R</title>
  <meta name="description" content="Capítulo7 Visualização | Introdução à Ciência de Dados em R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo7 Visualização | Introdução à Ciência de Dados em R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo7 Visualização | Introdução à Ciência de Dados em R" />
  
  
  

<meta name="author" content="Gustavo Jun Yakushiji; Cristian Marcelo Villegas Lobos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="trans.html"/>
<link rel="next" href="mapas.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução à Ciência de Dados em R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introdução</a></li>
<li class="chapter" data-level="2" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html"><i class="fa fa-check"></i><b>2</b> Ciência de dados e R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#o-que-é-ciência-de-dados"><i class="fa fa-check"></i><b>2.1</b> O que é Ciência de Dados?</a></li>
<li class="chapter" data-level="2.2" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#r-rstudio"><i class="fa fa-check"></i><b>2.2</b> R / RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#instalando-o-r"><i class="fa fa-check"></i><b>2.2.1</b> Instalando o R</a></li>
<li class="chapter" data-level="2.2.2" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#instalando-o-rstudio"><i class="fa fa-check"></i><b>2.2.2</b> Instalando o RStudio</a></li>
<li class="chapter" data-level="2.2.3" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#rstudio"><i class="fa fa-check"></i><b>2.2.3</b> Ambiente RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#etapas-da-ciência-de-dados"><i class="fa fa-check"></i><b>2.3</b> Etapas da Ciência de Dados</a></li>
<li class="chapter" data-level="2.4" data-path="ciência-de-dados-e-r.html"><a href="ciência-de-dados-e-r.html#pacote"><i class="fa fa-check"></i><b>2.4</b> Pacote <code>tidyverse</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html"><i class="fa fa-check"></i><b>3</b> Noções básicas em R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#proj"><i class="fa fa-check"></i><b>3.1</b> Projetos</a></li>
<li class="chapter" data-level="3.2" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#ajuda"><i class="fa fa-check"></i><b>3.2</b> Ajuda</a></li>
<li class="chapter" data-level="3.3" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#comentários"><i class="fa fa-check"></i><b>3.3</b> Comentários</a></li>
<li class="chapter" data-level="3.4" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#operações-matemáticas"><i class="fa fa-check"></i><b>3.4</b> Operações matemáticas</a></li>
<li class="chapter" data-level="3.5" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#obj"><i class="fa fa-check"></i><b>3.5</b> Objetos</a></li>
<li class="chapter" data-level="3.6" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#funções"><i class="fa fa-check"></i><b>3.6</b> Funções</a></li>
<li class="chapter" data-level="3.7" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#classes"><i class="fa fa-check"></i><b>3.7</b> Classes</a></li>
<li class="chapter" data-level="3.8" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#dataf"><i class="fa fa-check"></i><b>3.8</b> Data frames</a></li>
<li class="chapter" data-level="3.9" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#vetor"><i class="fa fa-check"></i><b>3.9</b> Vetores</a></li>
<li class="chapter" data-level="3.10" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#fator"><i class="fa fa-check"></i><b>3.10</b> Fatores</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#diferenças-entre-fatores-e-caracteres"><i class="fa fa-check"></i><b>3.10.1</b> Diferenças entre fatores e caracteres</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#logica"><i class="fa fa-check"></i><b>3.11</b> Operações lógicas</a></li>
<li class="chapter" data-level="3.12" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#especial"><i class="fa fa-check"></i><b>3.12</b> Valores especiais</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#na"><i class="fa fa-check"></i><b>3.12.1</b> NA</a></li>
<li class="chapter" data-level="3.12.2" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#nan"><i class="fa fa-check"></i><b>3.12.2</b> NaN</a></li>
<li class="chapter" data-level="3.12.3" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#inf"><i class="fa fa-check"></i><b>3.12.3</b> Inf</a></li>
<li class="chapter" data-level="3.12.4" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#null"><i class="fa fa-check"></i><b>3.12.4</b> NULL</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#list"><i class="fa fa-check"></i><b>3.13</b> Listas</a>
<ul>
<li class="chapter" data-level="3.13.1" data-path="noções-básicas-em-r.html"><a href="noções-básicas-em-r.html#df"><i class="fa fa-check"></i><b>3.13.1</b> Data frames e listas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>4</b> Importação</a>
<ul>
<li class="chapter" data-level="4.1" data-path="import.html"><a href="import.html#pacote-readr"><i class="fa fa-check"></i><b>4.1</b> Pacote <code>readr</code></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="import.html"><a href="import.html#ler-arquivos-texto"><i class="fa fa-check"></i><b>4.1.1</b> Ler arquivos texto</a></li>
<li class="chapter" data-level="4.1.2" data-path="import.html"><a href="import.html#readrgs"><i class="fa fa-check"></i><b>4.1.2</b> Outros argumentos</a></li>
<li class="chapter" data-level="4.1.3" data-path="import.html"><a href="import.html#escrever-arquivos-texto"><i class="fa fa-check"></i><b>4.1.3</b> Escrever arquivos texto</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="import.html"><a href="import.html#pacote-readxl"><i class="fa fa-check"></i><b>4.2</b> Pacote <code>readxl</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="import.html"><a href="import.html#ler-arquivos-excel"><i class="fa fa-check"></i><b>4.2.1</b> Ler arquivos Excel</a></li>
<li class="chapter" data-level="4.2.2" data-path="import.html"><a href="import.html#escrever-arquivos-excel"><i class="fa fa-check"></i><b>4.2.2</b> Escrever arquivos Excel</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="import.html"><a href="import.html#importação-via-url"><i class="fa fa-check"></i><b>4.3</b> Importação via URL</a></li>
<li class="chapter" data-level="4.4" data-path="import.html"><a href="import.html#banco-de-dados"><i class="fa fa-check"></i><b>4.4</b> Banco de dados</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="org.html"><a href="org.html"><i class="fa fa-check"></i><b>5</b> Organização</a>
<ul>
<li class="chapter" data-level="5.1" data-path="org.html"><a href="org.html#tibbles"><i class="fa fa-check"></i><b>5.1</b> Tibbles</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="org.html"><a href="org.html#criando-tibbles"><i class="fa fa-check"></i><b>5.1.1</b> Criando <em>Tibbles</em></a></li>
<li class="chapter" data-level="5.1.2" data-path="org.html"><a href="org.html#outras-funções"><i class="fa fa-check"></i><b>5.1.2</b> Outras funções</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="org.html"><a href="org.html#pacote-tidyr"><i class="fa fa-check"></i><b>5.2</b> Pacote <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="org.html"><a href="org.html#base-de-dados-tidy"><i class="fa fa-check"></i><b>5.2.1</b> Base de dados <em>tidy</em></a></li>
<li class="chapter" data-level="5.2.2" data-path="org.html"><a href="org.html#pivotagem"><i class="fa fa-check"></i><b>5.2.2</b> Pivotagem</a></li>
<li class="chapter" data-level="5.2.3" data-path="org.html"><a href="org.html#separar-e-unir"><i class="fa fa-check"></i><b>5.2.3</b> Separar e Unir</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="trans.html"><a href="trans.html"><i class="fa fa-check"></i><b>6</b> Transformação</a>
<ul>
<li class="chapter" data-level="6.1" data-path="trans.html"><a href="trans.html#pacote-dplyr"><i class="fa fa-check"></i><b>6.1</b> Pacote <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="trans.html"><a href="trans.html#selecionar"><i class="fa fa-check"></i><b>6.1.1</b> Selecionar</a></li>
<li class="chapter" data-level="6.1.2" data-path="trans.html"><a href="trans.html#operador-pipe"><i class="fa fa-check"></i><b>6.1.2</b> Operador <em>pipe</em> (%&gt;%)</a></li>
<li class="chapter" data-level="6.1.3" data-path="trans.html"><a href="trans.html#filtrar"><i class="fa fa-check"></i><b>6.1.3</b> Filtrar</a></li>
<li class="chapter" data-level="6.1.4" data-path="trans.html"><a href="trans.html#modificar-e-criar-colunas"><i class="fa fa-check"></i><b>6.1.4</b> Modificar e criar colunas</a></li>
<li class="chapter" data-level="6.1.5" data-path="trans.html"><a href="trans.html#resumo-de-valores"><i class="fa fa-check"></i><b>6.1.5</b> Resumo de valores</a></li>
<li class="chapter" data-level="6.1.6" data-path="trans.html"><a href="trans.html#ordenar"><i class="fa fa-check"></i><b>6.1.6</b> Ordenar</a></li>
<li class="chapter" data-level="6.1.7" data-path="trans.html"><a href="trans.html#mudar-nomes-de-colunas"><i class="fa fa-check"></i><b>6.1.7</b> Mudar nomes de colunas</a></li>
<li class="chapter" data-level="6.1.8" data-path="trans.html"><a href="trans.html#juntar-bases-de-dados"><i class="fa fa-check"></i><b>6.1.8</b> Juntar bases de dados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graf.html"><a href="graf.html"><i class="fa fa-check"></i><b>7</b> Visualização</a>
<ul>
<li class="chapter" data-level="7.1" data-path="graf.html"><a href="graf.html#gráfico-de-dispersão"><i class="fa fa-check"></i><b>7.1</b> Gráfico de Dispersão</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="graf.html"><a href="graf.html#cores"><i class="fa fa-check"></i><b>7.1.1</b> Cores</a></li>
<li class="chapter" data-level="7.1.2" data-path="graf.html"><a href="graf.html#formatos"><i class="fa fa-check"></i><b>7.1.2</b> Formatos</a></li>
<li class="chapter" data-level="7.1.3" data-path="graf.html"><a href="graf.html#tamanho"><i class="fa fa-check"></i><b>7.1.3</b> Tamanho</a></li>
<li class="chapter" data-level="7.1.4" data-path="graf.html"><a href="graf.html#transparência"><i class="fa fa-check"></i><b>7.1.4</b> Transparência</a></li>
<li class="chapter" data-level="7.1.5" data-path="graf.html"><a href="graf.html#facetas-facets"><i class="fa fa-check"></i><b>7.1.5</b> Facetas (<em>Facets</em>)</a></li>
<li class="chapter" data-level="7.1.6" data-path="graf.html"><a href="graf.html#linhas-de-referência"><i class="fa fa-check"></i><b>7.1.6</b> Linhas de referência</a></li>
<li class="chapter" data-level="7.1.7" data-path="graf.html"><a href="graf.html#linhas-de-regressão"><i class="fa fa-check"></i><b>7.1.7</b> Linhas de regressão</a></li>
<li class="chapter" data-level="7.1.8" data-path="graf.html"><a href="graf.html#títulos-e-rótulos"><i class="fa fa-check"></i><b>7.1.8</b> Títulos e rótulos</a></li>
<li class="chapter" data-level="7.1.9" data-path="graf.html"><a href="graf.html#temas"><i class="fa fa-check"></i><b>7.1.9</b> Temas</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="graf.html"><a href="graf.html#gráfico-de-barras"><i class="fa fa-check"></i><b>7.2</b> Gráfico de Barras</a>
<ul>
<li><a href="graf.html#geom_col"><code>geom_col()</code></a></li>
<li><a href="graf.html#geom_bar"><code>geom_bar()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="graf.html"><a href="graf.html#gráfico-de-setores-pizza"><i class="fa fa-check"></i><b>7.3</b> Gráfico de Setores (Pizza)</a></li>
<li class="chapter" data-level="7.4" data-path="graf.html"><a href="graf.html#gráfico-de-linhas"><i class="fa fa-check"></i><b>7.4</b> Gráfico de Linhas</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="graf.html"><a href="graf.html#cores-2"><i class="fa fa-check"></i><b>7.4.1</b> Cores</a></li>
<li class="chapter" data-level="7.4.2" data-path="graf.html"><a href="graf.html#tamanho-1"><i class="fa fa-check"></i><b>7.4.2</b> Tamanho</a></li>
<li class="chapter" data-level="7.4.3" data-path="graf.html"><a href="graf.html#geometrias"><i class="fa fa-check"></i><b>7.4.3</b> Geometrias</a></li>
<li class="chapter" data-level="7.4.4" data-path="graf.html"><a href="graf.html#formatos-1"><i class="fa fa-check"></i><b>7.4.4</b> Formatos</a></li>
<li class="chapter" data-level="7.4.5" data-path="graf.html"><a href="graf.html#escalas"><i class="fa fa-check"></i><b>7.4.5</b> Escalas</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="graf.html"><a href="graf.html#gráficos-de-medidas-resumo"><i class="fa fa-check"></i><b>7.5</b> Gráficos de medidas-resumo</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="graf.html"><a href="graf.html#histogramas"><i class="fa fa-check"></i><b>7.5.1</b> Histogramas</a></li>
<li class="chapter" data-level="7.5.2" data-path="graf.html"><a href="graf.html#gráfico-de-densidade"><i class="fa fa-check"></i><b>7.5.2</b> Gráfico de densidade</a></li>
<li class="chapter" data-level="7.5.3" data-path="graf.html"><a href="graf.html#boxplot"><i class="fa fa-check"></i><b>7.5.3</b> Boxplot</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="graf.html"><a href="graf.html#juntar-gráficos-diferentes"><i class="fa fa-check"></i><b>7.6</b> Juntar gráficos diferentes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i><b>8</b> Mapas</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mapas.html"><a href="mapas.html#funções-do-pacote-geobr"><i class="fa fa-check"></i><b>8.1</b> Funções do pacote <code>geobr</code></a></li>
<li class="chapter" data-level="8.2" data-path="mapas.html"><a href="mapas.html#mapa-do-país"><i class="fa fa-check"></i><b>8.2</b> Mapa do país</a></li>
<li class="chapter" data-level="8.3" data-path="mapas.html"><a href="mapas.html#estados"><i class="fa fa-check"></i><b>8.3</b> Estados</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mapas.html"><a href="mapas.html#estad"><i class="fa fa-check"></i><b>8.3.1</b> Selecionando estados</a></li>
<li class="chapter" data-level="8.3.2" data-path="mapas.html"><a href="mapas.html#leg"><i class="fa fa-check"></i><b>8.3.2</b> Adicionando legendas</a></li>
<li class="chapter" data-level="8.3.3" data-path="mapas.html"><a href="mapas.html#estado-de-um-cep"><i class="fa fa-check"></i><b>8.3.3</b> Estado de um CEP</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="mapas.html"><a href="mapas.html#regiões"><i class="fa fa-check"></i><b>8.4</b> Regiões</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="mapas.html"><a href="mapas.html#regiões-específicas"><i class="fa fa-check"></i><b>8.4.1</b> Regiões específicas</a></li>
<li class="chapter" data-level="8.4.2" data-path="mapas.html"><a href="mapas.html#regiões-com-os-estados"><i class="fa fa-check"></i><b>8.4.2</b> Regiões com os estados</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="mapas.html"><a href="mapas.html#mesorregiões-e-microrregiões"><i class="fa fa-check"></i><b>8.5</b> Mesorregiões e Microrregiões</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="mapas.html"><a href="mapas.html#mesorregiões"><i class="fa fa-check"></i><b>8.5.1</b> Mesorregiões</a></li>
<li class="chapter" data-level="8.5.2" data-path="mapas.html"><a href="mapas.html#microrregiões"><i class="fa fa-check"></i><b>8.5.2</b> Microrregiões</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="mapas.html"><a href="mapas.html#municípios"><i class="fa fa-check"></i><b>8.6</b> Municípios</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="mapas.html"><a href="mapas.html#função-lookup_muni"><i class="fa fa-check"></i><b>8.6.1</b> Função <code>lookup_muni()</code></a></li>
<li class="chapter" data-level="8.6.2" data-path="mapas.html"><a href="mapas.html#selecionando-municípios"><i class="fa fa-check"></i><b>8.6.2</b> Selecionando Municípios</a></li>
<li class="chapter" data-level="8.6.3" data-path="mapas.html"><a href="mapas.html#mapa-do-brasil-com-as-capitais"><i class="fa fa-check"></i><b>8.6.3</b> Mapa do Brasil com as capitais</a></li>
<li class="chapter" data-level="8.6.4" data-path="mapas.html"><a href="mapas.html#sedes-municipais"><i class="fa fa-check"></i><b>8.6.4</b> Sedes municipais</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="mapas.html"><a href="mapas.html#bairrossubdistritosdistritos"><i class="fa fa-check"></i><b>8.7</b> Bairros/Subdistritos/Distritos</a></li>
<li class="chapter" data-level="8.8" data-path="mapas.html"><a href="mapas.html#regiões-metropolitanas"><i class="fa fa-check"></i><b>8.8</b> Regiões Metropolitanas</a></li>
<li class="chapter" data-level="8.9" data-path="mapas.html"><a href="mapas.html#áreas-urbanas"><i class="fa fa-check"></i><b>8.9</b> Áreas urbanas</a></li>
<li class="chapter" data-level="8.10" data-path="mapas.html"><a href="mapas.html#áreas-mínimas-comparáveis-amcs"><i class="fa fa-check"></i><b>8.10</b> Áreas mínimas comparáveis (AMCs)</a></li>
<li class="chapter" data-level="8.11" data-path="mapas.html"><a href="mapas.html#mapas-temáticos"><i class="fa fa-check"></i><b>8.11</b> Mapas temáticos</a>
<ul>
<li class="chapter" data-level="8.11.1" data-path="mapas.html"><a href="mapas.html#censo-agropecuário-2006-e-2017"><i class="fa fa-check"></i><b>8.11.1</b> Censo agropecuário 2006 e 2017</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="mapas.html"><a href="mapas.html#biomas"><i class="fa fa-check"></i><b>8.12</b> Biomas</a></li>
<li class="chapter" data-level="8.13" data-path="mapas.html"><a href="mapas.html#amazônia-legal"><i class="fa fa-check"></i><b>8.13</b> Amazônia Legal</a></li>
<li class="chapter" data-level="8.14" data-path="mapas.html"><a href="mapas.html#semiárido"><i class="fa fa-check"></i><b>8.14</b> Semiárido</a></li>
<li class="chapter" data-level="8.15" data-path="mapas.html"><a href="mapas.html#áreas-de-conservação"><i class="fa fa-check"></i><b>8.15</b> Áreas de conservação</a></li>
<li class="chapter" data-level="8.16" data-path="mapas.html"><a href="mapas.html#terras-indígenas"><i class="fa fa-check"></i><b>8.16</b> Terras indígenas</a></li>
<li class="chapter" data-level="8.17" data-path="mapas.html"><a href="mapas.html#áreas-de-risco-de-desastres-naturais"><i class="fa fa-check"></i><b>8.17</b> Áreas de risco de desastres naturais</a></li>
<li class="chapter" data-level="8.18" data-path="mapas.html"><a href="mapas.html#estabelecimentos-de-saúde"><i class="fa fa-check"></i><b>8.18</b> Estabelecimentos de saúde</a></li>
<li class="chapter" data-level="8.19" data-path="mapas.html"><a href="mapas.html#regiões-de-saúde"><i class="fa fa-check"></i><b>8.19</b> Regiões de saúde</a></li>
<li class="chapter" data-level="8.20" data-path="mapas.html"><a href="mapas.html#escolas"><i class="fa fa-check"></i><b>8.20</b> Escolas</a></li>
<li class="chapter" data-level="8.21" data-path="mapas.html"><a href="mapas.html#áreas-de-concentração-de-população"><i class="fa fa-check"></i><b>8.21</b> Áreas de Concentração de População</a></li>
<li class="chapter" data-level="8.22" data-path="mapas.html"><a href="mapas.html#arranjos-populacionais"><i class="fa fa-check"></i><b>8.22</b> Arranjos populacionais</a></li>
<li class="chapter" data-level="8.23" data-path="mapas.html"><a href="mapas.html#setor-censitário"><i class="fa fa-check"></i><b>8.23</b> Setor censitário</a></li>
<li class="chapter" data-level="8.24" data-path="mapas.html"><a href="mapas.html#áreas-de-ponderação"><i class="fa fa-check"></i><b>8.24</b> Áreas de ponderação</a></li>
<li class="chapter" data-level="8.25" data-path="mapas.html"><a href="mapas.html#grade-estatística-do-ibge"><i class="fa fa-check"></i><b>8.25</b> Grade estatística do IBGE</a>
<ul>
<li class="chapter" data-level="8.25.1" data-path="mapas.html"><a href="mapas.html#tabela-de-correspondência"><i class="fa fa-check"></i><b>8.25.1</b> Tabela de correspondência</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliografia-consultada.html"><a href="bibliografia-consultada.html"><i class="fa fa-check"></i>Bibliografia consultada</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado com bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução à Ciência de Dados em R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graf" class="section level1" number="7">
<h1><span class="header-section-number">Capítulo7</span> Visualização</h1>
<p>Nesta seção, focaremos na <strong>Visualização de dados</strong> (<em>Data Visualization</em>). A visualização consiste em uma etapa importante tanto para enxergar informações relevantes em nossas análises, como para apresentar os resultados obtidos. Para tanto, utilizaremos os recursos disponíveis no pacote <code>ggplot2</code>.</p>
<p>O <code>ggplot2</code> foi idealizado por Hadley Wickham em sua tese de doutorado, em 2010, intitulada <a href="http://vita.had.co.nz/papers/layered-grammar.pdf"><em>A Layered Grammar of Graphics</em></a>. Desde então, tornou-se um dos pacotes mais populares para a confecção de gráficos elegantes e versáteis, tendo como base a <em>gramática de gráficos</em>.</p>
<p>O conceito de <em>gramática de gráficos</em> foi proposto originalmente no livro <a href="https://www.springer.com/gp/book/9780387245447"><em>The Grammar of Graphics</em></a>, por Leland Wilkinson, em 2005. Sua lógica se assemelha à gramática linguística na qual, para formularmos uma frase inteligível, devemos seguir uma ordem coerente de palavras. De modo semelhante, para construirmos gráficos a partir do <code>ggplot2</code>, devemos ter em mente quais são os seus fundamentos gramaticais.</p>
<p>Basicamente, a <em>gramática de gráficos</em> está dividida em 7 camadas, podendo, ou não, estarem juntas, simultaneamente, em um só gráfico. A sua construção variará de acordo com o tipo de gráfico, além da necessidade e subjetividade do cientista de dados. As camadas podem ser classificadas como:</p>
<ul>
<li><p><strong>Dados</strong> (<em>Data</em>): se refere ao <em>data frame</em> a ser utilizado para a confecção gráfica. É relevante ter noção sobre os tipos de variáveis que o compõe (qualitativas ou quantitativas), a fim de utilizá-las de maneira correta;</p></li>
<li><p><strong>Estéticas</strong> (<em>Aesthetics</em>): caracterizada pelo mapeamento em formas visuais, como a disposição das variáveis no plano cartesiano e a designação de cores, formas e tamanhos às variáveis;</p></li>
<li><p><strong>Geometrias</strong> (<em>Geometries</em>): representação geométrica do gráfico, seja em pontos, linhas, barras, caixas etc.;</p></li>
<li><p><strong>Facetas</strong> (<em>Facets</em>): é a forma de exibição dos gráficos de acordo com uma variável de interesse, podendo ser divididos em duas grades, em múltiplas grades ou simplesmente de forma individualizada;</p></li>
<li><p><strong>Estatísticas</strong> (<em>Statistics</em>): são os elementos de estatística calculados e presentes no gráfico, podendo ser a média, uma linha de tendência etc.;</p></li>
<li><p><strong>Coordenadas</strong> (<em>Coordinates</em>): definição das dimensões das coordenadas de acordo com o interesse;</p></li>
<li><p><strong>Tema</strong> (<em>Theme</em>): Cores, fonte do texto, tamanhos, formatações, legendas.</p></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-182"></span>
<img src="imagens/gglayers.png" alt="Representação das 7 camadas presentes na gramática de gráficos, as quais utilizamos no ggplot2. Fonte: The Grammar of Graphics, 2005." width="70%" />
<p class="caption">
Figure 7.1: Representação das 7 camadas presentes na gramática de gráficos, as quais utilizamos no ggplot2. Fonte: The Grammar of Graphics, 2005.
</p>
</div>
<p>Portanto, a essência do <code>ggplot2</code> é a construção gráfica em camadas. A página <a href="https://www.r-graph-gallery.com/"><em>The R Graph Gallery</em></a> compila uma série de exemplos gráficos possíveis de serem realizados no R, a partir do <code>ggplot2</code>, disponibilizando os códigos para que outros possam reproduzí-los e se inspirarem em novas criações.</p>
<p>A seguir, veremos as aplicações das diversas possibilidades gráficas e a lógica gramatical por trás de tudo. Para isso, devemos rodar o pacote <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="graf.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>Caso você não tenha instalado o <code>ggplot2</code>, prossiga da seguinte maneira:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="graf.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb472-2"><a href="graf.html#cb472-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>Para verificar todos os conteúdos presentes no <code>ggplot2</code>, execute o seguinte comando:</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="graf.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>)</span></code></pre></div>
<p>Se você rodou o comando, notou que o <code>ggplot2</code> possui mais de 1000 funcionalidades! Mas, apesar da complexidade que este pacote carrega, suas ferramentas básicas são fáceis de serem assimiladas. A seguir, daremos os primeiros passos para construir os principais gráficos em <code>ggplot2</code>, para que, posteriormente, o leitor possa explorar com propriedade estas vastas funcionalidades presentes no pacote.</p>
<p>Nos exemplos a seguir, utilizaremos alguns bancos de dados que podem ser baixados <a href="https://github.com/gustavojy/ApostilaCD-R/blob/main/dados_zip/dados_ggplot2.zip?raw=true">clicando aqui</a>.</p>
<p><br></p>
<div id="gráfico-de-dispersão" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Gráfico de Dispersão</h2>
<p>O primeiro gráfico que construiremos será o de dispersão. Esse tipo de gráfico é muito útil para determinar a tendência dos dados, seja linear ou não-linear, principalmente tratando de duas variáveis contínuas. Além disso, permite identificar observações atípicas. Para tanto, utilizaremos dados de alunos da disciplina Estatística Aplicada, presentes no arquivo <code>dados_alunos.csv</code>.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="graf.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb474-2"><a href="graf.html#cb474-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-3"><a href="graf.html#cb474-3" aria-hidden="true" tabindex="-1"></a>dados_alunos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;dados_ggplot2/dados_alunos.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="graf.html#cb475-1" aria-hidden="true" tabindex="-1"></a>dados_alunos</span></code></pre></div>
<pre><code># A tibble: 64 x 7
   sexo  idade altura  peso horas_estudo media_ponderada futuro   
   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt; &lt;chr&gt;    
 1 M        23   1.75    80            2             7.5 academico
 2 F        19   1.67    65            2             8.3 mercado  
 3 M        19   1.7     90            3             6.9 mercado  
 4 M        22   1.73    87            3             7.1 academico
 5 M        19   1.83    71            2             6.5 mercado  
 6 M        19   1.8     80            3             8.6 mercado  
 7 M        20   1.9     90            2             7.8 academico
 8 F        20   1.6     55            1             8   mercado  
 9 F        24   1.62    55            2             8.2 academico
10 F        18   1.64    60            2             7.3 mercado  
# ... with 54 more rows</code></pre>
<p>A base de dados possui 64 observações e 7 variáveis, as quais informam o sexo, idade, altura (em metros), peso (em kg), horas de estudo (por dia), média ponderada no curso e perspectiva futura após a graduação.</p>
<p>Neste primeiro momento, utilizaremos as variáveis altura e peso para construir o gráfico de pontos.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="graf.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb477-2"><a href="graf.html#cb477-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb477-3"><a href="graf.html#cb477-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso)) <span class="sc">+</span></span>
<span id="cb477-4"><a href="graf.html#cb477-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-188-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A primeira camada do nosso gráfico é dada pela função <code>ggplot()</code>. O argumento <code>data =</code> recebe o objeto <code>dados_alunos</code>, ou seja, recebe a base de dados que importamos anteriormente e que utilizaremos para construir o gráfico. Em seguida, o argumento <code>mapping =</code> define a estética do gráfico a partir da função <code>aes()</code>, sendo atribuído ao eixo x a variável altura (<code>x = altura</code>) e ao eixo y, a variável peso (<code>y = peso</code>). Por fim, criamos uma última camada referente ao tipo de geometria adotado no gráfico, no caso, a geometria de pontos <code>geom_point()</code>.</p>
<p>Perceba que as camadas são unidas por um sinal de <code>+</code>. Portanto, a combinação das funções <code>ggplot()</code> e <code>geom_point()</code> define o tipo de gráfico resultante.</p>
<p>Para se ter uma noção de como foi gerado o gráfico e entender melhor a lógica da <em>gramática de gráficos</em>, rodaremos o código anterior por partes.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="graf.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-189-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ao definir somente o argumento <code>data = dados_alunos</code> na função <code>ggplot()</code>, o <code>ggplot2</code> nos retorna um gráfico vazio, pois indicamos apenas qual a base de dados que utilizaremos, sem fornecer informações referentes à estrutura do gráfico.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="graf.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb479-2"><a href="graf.html#cb479-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura, </span>
<span id="cb479-3"><a href="graf.html#cb479-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-190-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Agora, indicando as variáveis mapeadas nos eixos x e y, temos um gráfico com as coordenadas definidas, porém sem ter os dados plotados, pois ainda não definimos qual o tipo de geometria será utilizada.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="graf.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb480-2"><a href="graf.html#cb480-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb480-3"><a href="graf.html#cb480-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso)) <span class="sc">+</span></span>
<span id="cb480-4"><a href="graf.html#cb480-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-191-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Assim, ao definir a geometria de pontos <code>geom_point()</code>, os dados são inseridos no gráfico.</p>
<p>Portanto, para os que estão começando a utilizar o <code>ggplot2</code>, recomendo executar comando por comando, pois auxiliará na compreensão da montagem dos gráficos.</p>
<div id="cores" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Cores</h3>
<p>Há a possibilidade de incluir outras variáveis ao gráfico anterior. Por exemplo, dentro da função <code>aes()</code>, podemos incluir o argumento <code>color = sexo</code> para distinguir a coloração dos pontos de acordo com o sexo dos alunos.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="graf.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb481-2"><a href="graf.html#cb481-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb481-3"><a href="graf.html#cb481-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb481-4"><a href="graf.html#cb481-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo)) <span class="sc">+</span></span>
<span id="cb481-5"><a href="graf.html#cb481-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-192-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="formatos" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Formatos</h3>
<p>Podemos realizar algumas modificações em relação à aparência dos pontos, como por exemplo, alterar seu formato utilizando o argumento <code>shape =</code> dentro da função <code>geom_point()</code>.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="graf.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb482-2"><a href="graf.html#cb482-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb482-3"><a href="graf.html#cb482-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb482-4"><a href="graf.html#cb482-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo)) <span class="sc">+</span></span>
<span id="cb482-5"><a href="graf.html#cb482-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-193-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Cada tipo de formato é representado por um número, cujas legendas podem ser conferidas na figura <a href="graf.html#fig:shape">7.2</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shape"></span>
<img src="imagens/shapes.png" alt="Legendas dos tipos de formatos de pontos, indicados no argumento `shape`. Fonte: R for Data Science, 2017." width="70%" />
<p class="caption">
Figure 7.2: Legendas dos tipos de formatos de pontos, indicados no argumento <code>shape</code>. Fonte: R for Data Science, 2017.
</p>
</div>
<p>Além de atribuir um único tipo de formato aos pontos, podemos distinguir variáveis a partir dos formatos. Para isso, utilizamos o argumento <code>shape</code> dentro da função <code>aes()</code>, indicando qual variável da base de dados será atribuída ao argumento. Como exemplo, utilizaremos novamente a variável <code>sexo</code>.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="graf.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb483-2"><a href="graf.html#cb483-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb483-3"><a href="graf.html#cb483-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb483-4"><a href="graf.html#cb483-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">shape =</span> sexo)) <span class="sc">+</span></span>
<span id="cb483-5"><a href="graf.html#cb483-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-194-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Como padrão, o argumento atribui aos pontos os formatos <code>16</code> e <code>17</code>. Para alterá-los, utilizamos a função <code>scale_shape_manual()</code>, com o argumento <code>values</code> recebendo um vetor com os números dos formatos que se deseja atribuir.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="graf.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb484-2"><a href="graf.html#cb484-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb484-3"><a href="graf.html#cb484-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb484-4"><a href="graf.html#cb484-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">shape =</span> sexo)) <span class="sc">+</span></span>
<span id="cb484-5"><a href="graf.html#cb484-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb484-6"><a href="graf.html#cb484-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">24</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-195-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que a ordem dos números no vetor segue a ordem das variáveis, ou seja, o formato <code>13</code> é referente ao sexo feminino (<code>F</code>) e o formato <code>24</code>, ao sexo masculino (<code>M</code>).</p>
</div>
<div id="tamanho" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Tamanho</h3>
<p>Ainda, podemos alterar o tamanho dos pontos. Para isso, utilizamos o argumento <code>size</code> dentro da função <code>geom_point()</code>.</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="graf.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb485-2"><a href="graf.html#cb485-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb485-3"><a href="graf.html#cb485-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb485-4"><a href="graf.html#cb485-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo)) <span class="sc">+</span></span>
<span id="cb485-5"><a href="graf.html#cb485-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-196-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Caso o argumento <code>size</code> não seja especificado, por padrão, o valor adotado é igual a 1. Assim, podemos gerar ponto maiores designando valores superiores a 1, ou senão, pontos menores, atribuindo valores inferiores a 1.</p>
<p>Outra possibilidade é diferenciar as idades dos alunos pelo tamanho dos pontos. Para isso, o argumento <code>size</code> receberá a variável <code>idade</code>, dentro a função <code>aes()</code>.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="graf.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb486-2"><a href="graf.html#cb486-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb486-3"><a href="graf.html#cb486-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb486-4"><a href="graf.html#cb486-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb486-5"><a href="graf.html#cb486-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">size =</span> idade)) <span class="sc">+</span></span>
<span id="cb486-6"><a href="graf.html#cb486-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-197-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="transparência" class="section level3" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> Transparência</h3>
<p>Por fim, podemos diferenciar as idades pela transparência dos pontos, utilizando o argumento <code>alpha</code>.</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="graf.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb487-2"><a href="graf.html#cb487-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb487-3"><a href="graf.html#cb487-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb487-4"><a href="graf.html#cb487-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb487-5"><a href="graf.html#cb487-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade)) <span class="sc">+</span></span>
<span id="cb487-6"><a href="graf.html#cb487-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-198-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
<p>Você deve ter percebido que um mesmo argumento pode ser utilizado de diferentes maneiras. Nos exemplos anteriores, utilizamos os argumentos <code>shape</code> e <code>size</code> dentro da função <code>aes()</code>, mas também na <code>geom_point()</code>. Quando utilizamos dentro da <code>aes()</code>, o argumento sempre recebe uma <strong>variável</strong> da base de dados. Por outro lado, quando utilizada na <code>geom_point()</code>, eles recebem um valor genérico contido em uma determinada escala. Assim, devemos nos atentar a esses detalhes para construirmos os gráficos de acordo com as especificações e posições dos argumentos.</p>
<p><br></p>
</div>
<div id="facetas-facets" class="section level3" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> Facetas (<em>Facets</em>)</h3>
<p>As facetas (<em>facets</em>) replicam os gráficos, separando-os em grades (<em>grids</em>), de acordo com uma variável categórica do nosso banco de dados. Para ficar mais claro, vamos exemplificar as facetas. Para isso, utilizaremos a função <code>facet_wrap()</code>.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="graf.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb488-2"><a href="graf.html#cb488-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb488-3"><a href="graf.html#cb488-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb488-4"><a href="graf.html#cb488-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb488-5"><a href="graf.html#cb488-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb488-6"><a href="graf.html#cb488-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-199-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A função <code>facet_wrap()</code> entra como uma terceira camada ao gráfico. Como argumento, utilizamos a fórmula <code>~sexo</code> para dizer que a variável <code>sexo</code> será utilizada como fator para quebrar o gráfico em duas grades. Como se pode perceber, cada grade recebe somente os dados referentes aos respectivos sexos. Logo em seguida, temos um outro argumento que nos indica a disposição dos gráficos. No caso do <code>ncol</code>, os gráficos ficam dispostos lado a lado, sendo que para o <code>nrow</code> os gráficos se dispõem um embaixo do outro, como podemos ver a seguir.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="graf.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb489-2"><a href="graf.html#cb489-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb489-3"><a href="graf.html#cb489-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb489-4"><a href="graf.html#cb489-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb489-5"><a href="graf.html#cb489-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb489-6"><a href="graf.html#cb489-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-200-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ainda podemos associar duas variáveis categóricas ao <em>facet</em>. Como exemplo, adicionaremos a variável <code>futuro</code> à fórmula <code>futuro~sexo</code>, a fim de verificarmos as perspectivas dos alunos sobre seus futuros após a graduação, de acordo com o sexo.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="graf.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb490-2"><a href="graf.html#cb490-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb490-3"><a href="graf.html#cb490-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb490-4"><a href="graf.html#cb490-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb490-5"><a href="graf.html#cb490-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb490-6"><a href="graf.html#cb490-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(futuro<span class="sc">~</span>sexo, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-201-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que o número atribuído ao argumento <code>ncol =</code> define o número de colunas do <em>facet</em>. A mesma lógica é válida para o <code>nrow =</code>, porém definindo o número de linhas.</p>
<p><br></p>
</div>
<div id="linhas-de-referência" class="section level3" number="7.1.6">
<h3><span class="header-section-number">7.1.6</span> Linhas de referência</h3>
<p>Podemos adicionar linhas de referência aos nossos gráficos.</p>
<div id="linhas-horizontais" class="section level4 unnumbered">
<h4>Linhas horizontais</h4>
<p>Para criar linhas horizontais, utilizamos a função <code>geom_hline()</code>. Como argumento, devemos usar a <code>yintercept</code>, que indica em qual ponto do eixo y será traçada a linha de referência horizontal.</p>
<p>No exemplo a seguir, será construído um gráfico de dispersão entre as horas de estudo e a média ponderada dos estudantes. A linha de referência será a média (<code>mean()</code>) da média ponderada dos alunos, indicada no argumento <code>yintercept</code>.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="graf.html#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb491-2"><a href="graf.html#cb491-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> horas_estudo,</span>
<span id="cb491-3"><a href="graf.html#cb491-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> media_ponderada))<span class="sc">+</span></span>
<span id="cb491-4"><a href="graf.html#cb491-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb491-5"><a href="graf.html#cb491-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="fu">mean</span>(media_ponderada)),</span>
<span id="cb491-6"><a href="graf.html#cb491-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb491-7"><a href="graf.html#cb491-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-202-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que o argumento <code>yintercept</code> foi colocado dentro da função <code>aes()</code>, pois utilizamos uma variável da nossa base de dados para construir a linha. Além disso, atribuímos a cor vermelha à linha (<code>color = "red"</code>) e definimos seu estilo com o argumento <code>linetype</code>. Cada tipo de linha é representado por um número, cuja legenda pode ser conferida na figura <a href="graf.html#fig:linetype">7.3</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:linetype"></span>
<img src="imagens/linetype.png" alt="Possíveis tipos de linhas a partir do argumento `linetype`. Fonte: R Graphics Cookbook." width="70%" />
<p class="caption">
Figure 7.3: Possíveis tipos de linhas a partir do argumento <code>linetype</code>. Fonte: R Graphics Cookbook.
</p>
</div>
</div>
<div id="linhas-verticais" class="section level4 unnumbered">
<h4>Linhas verticais</h4>
<p>As linhas de referência vertical são análogas às linhas horizontais. São construídas a partir da função <code>geom_vline()</code>, que recebe o argumento <code>xintercept =</code> para indicar em qual ponto do eixo x será traçada a linha.</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="graf.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb492-2"><a href="graf.html#cb492-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> media_ponderada,</span>
<span id="cb492-3"><a href="graf.html#cb492-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> horas_estudo))<span class="sc">+</span></span>
<span id="cb492-4"><a href="graf.html#cb492-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb492-5"><a href="graf.html#cb492-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(media_ponderada)),</span>
<span id="cb492-6"><a href="graf.html#cb492-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb492-7"><a href="graf.html#cb492-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-203-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="linhas-diagonais" class="section level4 unnumbered">
<h4>Linhas diagonais</h4>
<p>Já as linhas diagonais são feitas com a <code>geom_abline()</code>. Essa função desenha qualquer linha que siga a equação <code>y = a + b*x</code>, sendo <code>a</code> o intercepto com o eixo y, ou seja, o ponto onde a reta toca no eixo y, representado pelo argumento <code>intercept</code>, e <code>b</code>, o coeficiente angular da reta, indicado pelo argumento <code>slope</code>.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="graf.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculando o intercepto e o coeficiente angular</span></span>
<span id="cb493-2"><a href="graf.html#cb493-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">formula =</span> iris<span class="sc">$</span>Petal.Length <span class="sc">~</span> iris<span class="sc">$</span>Petal.Width)</span></code></pre></div>
<pre><code>
Call:
lm(formula = iris$Petal.Length ~ iris$Petal.Width)

Coefficients:
     (Intercept)  iris$Petal.Width  
           1.084             2.230  </code></pre>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="graf.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico com geom_abline()</span></span>
<span id="cb495-2"><a href="graf.html#cb495-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,<span class="fu">aes</span>(<span class="at">x =</span> Petal.Width,</span>
<span id="cb495-3"><a href="graf.html#cb495-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> Petal.Length,</span>
<span id="cb495-4"><a href="graf.html#cb495-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> Species))<span class="sc">+</span></span>
<span id="cb495-5"><a href="graf.html#cb495-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb495-6"><a href="graf.html#cb495-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fl">1.084</span>,</span>
<span id="cb495-7"><a href="graf.html#cb495-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">slope =</span> <span class="fl">2.23</span>,</span>
<span id="cb495-8"><a href="graf.html#cb495-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-204-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Como exemplo, utilizamos a base de dados nativa do R <code>iris</code> para criar um gráfico de dispersão entre a largura e o comprimento das pétalas de flores. Com a função <code>lm()</code>, calculamos o intercepto e o coeficiente angular entre as variáveis selecionadas, informando primeiro a variável do eixo y, seguida da variável do eixo x, tendo entre ambas o símbolo <code>~</code>.</p>
<p>Uma vez calculados o intercepto e o coeficiente angular, na função <code>geom_abline()</code> especificamos os argumentos <code>intercept = 1.084</code> e <code>slope = 2.23</code> para informar que a reta começa na coordenada (0 , 1.084), possuindo um coeficiente de angulação igual a 2,23.</p>
<p><br></p>
<p>Perceba que, em um mesmo gráfico, utilizamos duas camadas geométricas. Nesse último exemplo, a função <code>geom_point()</code> foi sobreposta pela <code>geom_abline()</code>, pois segundo a lógica da <em>gramática dos gráficos</em>, esses são construídos em camadas, portanto, a camada <code>geom_point()</code> vem antes da <code>geom_abline()</code>, sendo então sobreposta pela última.</p>
<p><br></p>
</div>
</div>
<div id="linhas-de-regressão" class="section level3" number="7.1.7">
<h3><span class="header-section-number">7.1.7</span> Linhas de regressão</h3>
<p>Também podemos incluir linhas de regressão ajustadas aos dados, a partir da função <code>geom_smooth()</code>.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="graf.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb496-2"><a href="graf.html#cb496-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb496-3"><a href="graf.html#cb496-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))<span class="sc">+</span></span>
<span id="cb496-4"><a href="graf.html#cb496-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb496-5"><a href="graf.html#cb496-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-205-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Neste primeiro gráfico, definimos dentro da função <code>ggplot()</code> os eixos <code>x = altura</code> e <code>y = peso</code>. Sendo assim, essa estética é utilizada por ambas as funções geométricas, tanto a <code>geom_point()</code>, como a <code>geom_smooth()</code>.</p>
<p>Podemos definir na função <code>geom_smooth()</code> o tipo de método para gerar a linha de regressão. Por padrão, o metódo utilizado é o <code>loess</code> (sigla de <em>locally estimated scatterplot smoothing</em>).</p>
<p>Para alterar o método, utilizamos o argumento <code>method =</code> na função <code>geom_smooth()</code>. No exemplo a seguir, definimos o método <code>"lm"</code>, ou seja, modelo linear (<em>linear model</em>).</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="graf.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb497-2"><a href="graf.html#cb497-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb497-3"><a href="graf.html#cb497-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))<span class="sc">+</span></span>
<span id="cb497-4"><a href="graf.html#cb497-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb497-5"><a href="graf.html#cb497-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-206-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que a linha de regressão apresenta uma região sombreada em seu entorno. Essa região é o intervalo de confiança que, por padrão, adota-se 95% de confiança. Para alterar o nível de confiança, utilizamos o argumento <code>level</code>. No exemplo a seguir, adotaremos 70% de confiança (<code>level = 0.70</code>).</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="graf.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb498-2"><a href="graf.html#cb498-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb498-3"><a href="graf.html#cb498-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))<span class="sc">+</span></span>
<span id="cb498-4"><a href="graf.html#cb498-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb498-5"><a href="graf.html#cb498-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, </span>
<span id="cb498-6"><a href="graf.html#cb498-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">level =</span> <span class="fl">0.70</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-207-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Para desativar o intervalo de confiança, utilizamos o argumento <code>se = FALSE</code>.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="graf.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb499-2"><a href="graf.html#cb499-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb499-3"><a href="graf.html#cb499-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))<span class="sc">+</span></span>
<span id="cb499-4"><a href="graf.html#cb499-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb499-5"><a href="graf.html#cb499-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb499-6"><a href="graf.html#cb499-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-208-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ainda podemos alterar alguns fatores estéticos da reta, como por exemplo a cor, tamanho e tipo de linha.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="graf.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb500-2"><a href="graf.html#cb500-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb500-3"><a href="graf.html#cb500-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso))<span class="sc">+</span></span>
<span id="cb500-4"><a href="graf.html#cb500-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb500-5"><a href="graf.html#cb500-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb500-6"><a href="graf.html#cb500-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>,</span>
<span id="cb500-7"><a href="graf.html#cb500-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb500-8"><a href="graf.html#cb500-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb500-9"><a href="graf.html#cb500-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-209-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Para construir linhas de regressão para diferentes grupos, em um mesmo gráfico, podemos prosseguir de diferentes maneiras. No exemplo a seguir, distinguiremos os pontos por cores, de acordo com o sexo.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="graf.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos)<span class="sc">+</span></span>
<span id="cb501-2"><a href="graf.html#cb501-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb501-3"><a href="graf.html#cb501-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">y =</span> peso,</span>
<span id="cb501-4"><a href="graf.html#cb501-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb501-5"><a href="graf.html#cb501-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb501-6"><a href="graf.html#cb501-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">y =</span> peso),</span>
<span id="cb501-7"><a href="graf.html#cb501-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb501-8"><a href="graf.html#cb501-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-210-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que, apesar de ter distinguido os pontos de acordo com o sexo, foi traçada uma única linha de regressão para ambos os sexos. Para construir uma linha para cada sexo, precisamos agrupar a variável <code>sexo</code> na função <code>aes()</code> da <code>geom_smooth()</code>, a partir do argumento <code>group =</code>.</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="graf.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos)<span class="sc">+</span></span>
<span id="cb502-2"><a href="graf.html#cb502-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb502-3"><a href="graf.html#cb502-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">y =</span> peso,</span>
<span id="cb502-4"><a href="graf.html#cb502-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb502-5"><a href="graf.html#cb502-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb502-6"><a href="graf.html#cb502-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">y =</span> peso,</span>
<span id="cb502-7"><a href="graf.html#cb502-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">group =</span> sexo),</span>
<span id="cb502-8"><a href="graf.html#cb502-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb502-9"><a href="graf.html#cb502-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-211-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nesses últimos exemplo, percaba que definimos a estética do gráfico (<code>aes()</code>) dentro de cada geometria e não mais na função <code>ggplot()</code>. Isso permite definir as estéticas individuais de cada geometria.</p>
<p>Caso contrário, poderíamos definir uma mesma estética para ambas as geometrias, definindo-a como função da <code>ggplot()</code>. No exemplo a seguir, traremos uma outra solução para o problema das linhas de regressão por categoria, definindo a <code>aes()</code> na função <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="graf.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb503-2"><a href="graf.html#cb503-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb503-3"><a href="graf.html#cb503-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb503-4"><a href="graf.html#cb503-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo))<span class="sc">+</span></span>
<span id="cb503-5"><a href="graf.html#cb503-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb503-6"><a href="graf.html#cb503-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb503-7"><a href="graf.html#cb503-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-212-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nesse caso, definimos o fator cor (<code>color</code>) para diferenciarmos o sexo, tanto para a <code>geom_point()</code>, como para a <code>geom_smooth()</code>. Assim, perceba que os ponto e as retas de regressão ficaram com cores diferentes, de acordo com o sexo.</p>
<p>Para saber mais sobre as linhas de regressão no <code>ggplot2</code>, confira os capítulos 5.6 a 5.9 do excelente livro <a href="https://r-graphics.org/recipe-scatter-fitlines">R Graphics Cookbook</a>.</p>
<p><br></p>
</div>
<div id="títulos-e-rótulos" class="section level3" number="7.1.8">
<h3><span class="header-section-number">7.1.8</span> Títulos e rótulos</h3>
<p>De maneira intuitiva, para colocarmos títulos e rótulos nos gráficos, adicionamos a camada <code>labs()</code>. Como argumento, indicamos qual fator desejamos (re)nomear. Atente-se ao fato de que as nomeações devem estar entre aspas.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="graf.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb504-2"><a href="graf.html#cb504-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb504-3"><a href="graf.html#cb504-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb504-4"><a href="graf.html#cb504-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb504-5"><a href="graf.html#cb504-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb504-6"><a href="graf.html#cb504-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb504-7"><a href="graf.html#cb504-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb504-8"><a href="graf.html#cb504-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb504-9"><a href="graf.html#cb504-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb504-10"><a href="graf.html#cb504-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb504-11"><a href="graf.html#cb504-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb504-12"><a href="graf.html#cb504-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb504-13"><a href="graf.html#cb504-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb504-14"><a href="graf.html#cb504-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb504-15"><a href="graf.html#cb504-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-213-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Podemos adicionar mais alguns ajustes, como centralizar o título e subtítulo, colocar a fonte à esquerda, além de ocultar as legendas.</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="graf.html#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb505-2"><a href="graf.html#cb505-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb505-3"><a href="graf.html#cb505-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb505-4"><a href="graf.html#cb505-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb505-5"><a href="graf.html#cb505-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb505-6"><a href="graf.html#cb505-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb505-7"><a href="graf.html#cb505-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb505-8"><a href="graf.html#cb505-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb505-9"><a href="graf.html#cb505-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb505-10"><a href="graf.html#cb505-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb505-11"><a href="graf.html#cb505-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb505-12"><a href="graf.html#cb505-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb505-13"><a href="graf.html#cb505-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb505-14"><a href="graf.html#cb505-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb505-15"><a href="graf.html#cb505-15" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb505-16"><a href="graf.html#cb505-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb505-17"><a href="graf.html#cb505-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb505-18"><a href="graf.html#cb505-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb505-19"><a href="graf.html#cb505-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-214-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nesse caso, conjuntamente à função <code>theme()</code>, utilizamos outra função, a <code>element_text()</code>, para ajustar o posicionamento horizontal do título (<code>plot.title</code>) e do subtítulo (<code>plot.subtitle</code>), além da fonte (<code>plot.caption</code>). O argumento <code>hjust</code> apresenta uma escala de 0 a 1, sendo 0 o posicionamento mais à esquerda do gráfico. Assim, para centralizarmos os textos, definimos o ajuste na metade da escala (<code>hjust = 0.5</code>).</p>
<p>No caso das legendas, ainda dentro da função <code>theme()</code>, utilizamos o argumento <code>legend.position = "none"</code> para ocultar todas as legendas presentes no gráfico.</p>
<p>Caso queira ocultar somente uma das legendas, utilizamos a função <code>guides()</code>, informando a variável cuja legenda se deseja ocultar.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="graf.html#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb506-2"><a href="graf.html#cb506-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb506-3"><a href="graf.html#cb506-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb506-4"><a href="graf.html#cb506-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb506-5"><a href="graf.html#cb506-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb506-6"><a href="graf.html#cb506-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb506-7"><a href="graf.html#cb506-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb506-8"><a href="graf.html#cb506-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb506-9"><a href="graf.html#cb506-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb506-10"><a href="graf.html#cb506-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb506-11"><a href="graf.html#cb506-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb506-12"><a href="graf.html#cb506-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb506-13"><a href="graf.html#cb506-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb506-14"><a href="graf.html#cb506-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb506-15"><a href="graf.html#cb506-15" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb506-16"><a href="graf.html#cb506-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb506-17"><a href="graf.html#cb506-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb506-18"><a href="graf.html#cb506-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb506-19"><a href="graf.html#cb506-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-215-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nesse exemplo, ocultamos apenas a legenda da variável <code>alpha</code>, atribuindo o valor lógico <code>FALSE</code>.</p>
<p>Para saber mais sobre títulos, rótulos e aparência geral dos gráficos, confira os capítulos 9 e 10 do livro <a href="https://r-graphics.org/chapter-appearance"><em>R Graphics Cookbook</em></a>.</p>
<p><br></p>
</div>
<div id="temas" class="section level3" number="7.1.9">
<h3><span class="header-section-number">7.1.9</span> Temas</h3>
<p>Existe a possibilidade de escolhermos outros temas para confeccionar nossos gráficos. Podemos criar temas a partir do zero ou senão utilizar aqueles presentes no <code>ggplot2</code> pela função <code>theme_</code>. A seguir demonstraremos alguns dos temas pré-configurados.</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="graf.html#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb507-2"><a href="graf.html#cb507-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb507-3"><a href="graf.html#cb507-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb507-4"><a href="graf.html#cb507-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb507-5"><a href="graf.html#cb507-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb507-6"><a href="graf.html#cb507-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb507-7"><a href="graf.html#cb507-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb507-8"><a href="graf.html#cb507-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb507-9"><a href="graf.html#cb507-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb507-10"><a href="graf.html#cb507-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb507-11"><a href="graf.html#cb507-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb507-12"><a href="graf.html#cb507-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb507-13"><a href="graf.html#cb507-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb507-14"><a href="graf.html#cb507-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb507-15"><a href="graf.html#cb507-15" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb507-16"><a href="graf.html#cb507-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb507-17"><a href="graf.html#cb507-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb507-18"><a href="graf.html#cb507-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb507-19"><a href="graf.html#cb507-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb507-20"><a href="graf.html#cb507-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-216-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="graf.html#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb508-2"><a href="graf.html#cb508-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb508-3"><a href="graf.html#cb508-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb508-4"><a href="graf.html#cb508-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb508-5"><a href="graf.html#cb508-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb508-6"><a href="graf.html#cb508-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb508-7"><a href="graf.html#cb508-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb508-8"><a href="graf.html#cb508-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb508-9"><a href="graf.html#cb508-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb508-10"><a href="graf.html#cb508-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb508-11"><a href="graf.html#cb508-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb508-12"><a href="graf.html#cb508-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb508-13"><a href="graf.html#cb508-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb508-14"><a href="graf.html#cb508-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb508-15"><a href="graf.html#cb508-15" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb508-16"><a href="graf.html#cb508-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb508-17"><a href="graf.html#cb508-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb508-18"><a href="graf.html#cb508-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb508-19"><a href="graf.html#cb508-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb508-20"><a href="graf.html#cb508-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-217-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="graf.html#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados_alunos,</span>
<span id="cb509-2"><a href="graf.html#cb509-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb509-3"><a href="graf.html#cb509-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> peso,</span>
<span id="cb509-4"><a href="graf.html#cb509-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> sexo,</span>
<span id="cb509-5"><a href="graf.html#cb509-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">alpha =</span> idade))<span class="sc">+</span></span>
<span id="cb509-6"><a href="graf.html#cb509-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb509-7"><a href="graf.html#cb509-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb509-8"><a href="graf.html#cb509-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Altura (m)&quot;</span>,</span>
<span id="cb509-9"><a href="graf.html#cb509-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>,</span>
<span id="cb509-10"><a href="graf.html#cb509-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Gênero&quot;</span>,</span>
<span id="cb509-11"><a href="graf.html#cb509-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="st">&quot;Idade (anos)&quot;</span>,</span>
<span id="cb509-12"><a href="graf.html#cb509-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico de dispersão&quot;</span>,</span>
<span id="cb509-13"><a href="graf.html#cb509-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Altura x Peso&quot;</span>,</span>
<span id="cb509-14"><a href="graf.html#cb509-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Fonte: Disciplina Estatística Aplicada/ESALQ.&quot;</span></span>
<span id="cb509-15"><a href="graf.html#cb509-15" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb509-16"><a href="graf.html#cb509-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dark</span>()<span class="sc">+</span></span>
<span id="cb509-17"><a href="graf.html#cb509-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb509-18"><a href="graf.html#cb509-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb509-19"><a href="graf.html#cb509-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb509-20"><a href="graf.html#cb509-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-218-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
</div>
<div id="gráfico-de-barras" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Gráfico de Barras</h2>
<p>Para a construção do gráfico de barras, dependendo do tipo de dados que queremos representar, podemos prosseguir a partir de duas vias. A primeira é utilizando a função <code>geom_col()</code>, sendo a outra, a <code>geom_bar()</code>. A seguir trataremos com detalhes ambas as funções.</p>
<div id="geom_col" class="section level3 unnumbered">
<h3><code>geom_col()</code></h3>
<p>Utilizamos a função <code>geom_col()</code> para construir gráficos de barras em que indicamos uma variável categórica ao eixo x e uma variável quantitativa ao eixo y, sendo essa última, a que determinará a altura das barras. Para a elaboração dos exemplos, utilizaremos dados referentes à produção de milho e trigo, disponível no arquivo <code>milho_trigo.csv</code>.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="graf.html#cb510-1" aria-hidden="true" tabindex="-1"></a>producao <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;dados_ggplot2/milho_trigo.csv&quot;</span>)</span>
<span id="cb510-2"><a href="graf.html#cb510-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb510-3"><a href="graf.html#cb510-3" aria-hidden="true" tabindex="-1"></a>producao</span></code></pre></div>
<pre><code># A tibble: 8 x 3
  Local  Cultura Valor
  &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;
1 Brasil Milho    2.6 
2 Brasil Trigo    1.52
3 China  Milho    3.94
4 China  Trigo    3.07
5 India  Milho    1.62
6 India  Trigo    2.08
7 EUA    Milho    7.38
8 EUA    Trigo    2.48</code></pre>
<p>A base de dados apresenta 8 observações e 3 variáveis. A variável <code>Local</code> possui os países Brasil, China, Índia e Estado Unidos; a <code>Cultura</code> contém as culturas agrícolas milho e trigo; e <code>Valor</code> representa a produtividade média anual dos países, em toneladas por hectare, entre 1961 e 2019.</p>
<p><br></p>
<div id="cores-1" class="section level4" number="7.2.0.1">
<h4><span class="header-section-number">7.2.0.1</span> Cores</h4>
<p>Nesse primeiro exemplo, queremos criar um gráfico de barras para representar a produção média de milho e trigo em cada um dos países. Para isso, utilizamos a função <code>geom_col()</code>. Perceba que, para diferenciarmos as porções da barra que representam as produções de cada cereal, podemos utilizar os argumentos estéticos <code>color = Item</code> e <code>fill = Item</code>.</p>
<p>O argumento <code>color =</code> somente colore as bordas das colunas, enquanto que o <code>fill =</code> preenche a barra com cores, de acordo os valores das variáveis milho e trigo.</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="graf.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Argumento &quot;color =&quot;</span></span>
<span id="cb512-2"><a href="graf.html#cb512-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb512-3"><a href="graf.html#cb512-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb512-4"><a href="graf.html#cb512-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb512-5"><a href="graf.html#cb512-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Cultura))<span class="sc">+</span></span>
<span id="cb512-6"><a href="graf.html#cb512-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-220-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="graf.html#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Argumento &quot;fill =&quot;</span></span>
<span id="cb513-2"><a href="graf.html#cb513-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb513-3"><a href="graf.html#cb513-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb513-4"><a href="graf.html#cb513-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb513-5"><a href="graf.html#cb513-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb513-6"><a href="graf.html#cb513-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-221-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="posição" class="section level4" number="7.2.0.2">
<h4><span class="header-section-number">7.2.0.2</span> Posição</h4>
<p>Caso queira alterar a disposição das colunas, podemos utilizar o argumento <code>position =</code> e especificar o ajuste desejado, tendo como opções: <code>"stack"</code>, <code>"dodge"</code> e <code>"fill"</code>.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="graf.html#cb514-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;stack&quot;</span></span>
<span id="cb514-2"><a href="graf.html#cb514-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb514-3"><a href="graf.html#cb514-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb514-4"><a href="graf.html#cb514-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb514-5"><a href="graf.html#cb514-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb514-6"><a href="graf.html#cb514-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-222-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que a posição <code>"stack"</code> é a opção padrão do argumento <code>position =</code>, portanto, caso o argumento não seja especificado, a disposição do gráfico de colunas será a <code>"stack"</code>. Essa disposição de barras representa os valores absolutos de produtividade das culturas em apenas uma barra, de acordo com o país.</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="graf.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;dodge&quot;</span></span>
<span id="cb515-2"><a href="graf.html#cb515-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb515-3"><a href="graf.html#cb515-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb515-4"><a href="graf.html#cb515-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb515-5"><a href="graf.html#cb515-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb515-6"><a href="graf.html#cb515-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-223-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Já a posição <code>"dodge"</code> representa as cultura em colunas separadas, de acordo com o país, ainda representando valores absolutos de produtividade.</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="graf.html#cb516-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;fill&quot;</span></span>
<span id="cb516-2"><a href="graf.html#cb516-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb516-3"><a href="graf.html#cb516-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb516-4"><a href="graf.html#cb516-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb516-5"><a href="graf.html#cb516-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb516-6"><a href="graf.html#cb516-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-224-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Por último, a posição <code>"fill"</code> constrói barras iguais, com escala de 0 a 1, preenchendo-as com os valores absolutos das produções de milho e trigo, de acordo com o país.</p>
<p><br></p>
</div>
<div id="legendas" class="section level4" number="7.2.0.3">
<h4><span class="header-section-number">7.2.0.3</span> Legendas</h4>
<p>Podemos adicionar legendas às nossas colunas, a partir da função <code>geom_text()</code>. Nos seguintes caso, demonstraremos como inserir as legendas nos três tipos de posição, indicando os valores de produtividades referentes a cada cultura e país.</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="graf.html#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;stack&quot;</span></span>
<span id="cb517-2"><a href="graf.html#cb517-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb517-3"><a href="graf.html#cb517-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb517-4"><a href="graf.html#cb517-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb517-5"><a href="graf.html#cb517-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb517-6"><a href="graf.html#cb517-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)<span class="sc">+</span></span>
<span id="cb517-7"><a href="graf.html#cb517-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Valor),</span>
<span id="cb517-8"><a href="graf.html#cb517-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb517-9"><a href="graf.html#cb517-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">vjust =</span> <span class="fl">1.5</span>,</span>
<span id="cb517-10"><a href="graf.html#cb517-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="fl">0.9</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-225-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="graf.html#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;dodge&quot;</span></span>
<span id="cb518-2"><a href="graf.html#cb518-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb518-3"><a href="graf.html#cb518-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb518-4"><a href="graf.html#cb518-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb518-5"><a href="graf.html#cb518-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb518-6"><a href="graf.html#cb518-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)<span class="sc">+</span></span>
<span id="cb518-7"><a href="graf.html#cb518-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Valor),</span>
<span id="cb518-8"><a href="graf.html#cb518-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb518-9"><a href="graf.html#cb518-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="fl">1.5</span>,</span>
<span id="cb518-10"><a href="graf.html#cb518-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-226-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="graf.html#cb519-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Posição &quot;fill&quot;</span></span>
<span id="cb519-2"><a href="graf.html#cb519-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> producao,</span>
<span id="cb519-3"><a href="graf.html#cb519-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Local,</span>
<span id="cb519-4"><a href="graf.html#cb519-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb519-5"><a href="graf.html#cb519-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Cultura))<span class="sc">+</span></span>
<span id="cb519-6"><a href="graf.html#cb519-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)<span class="sc">+</span></span>
<span id="cb519-7"><a href="graf.html#cb519-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Valor),</span>
<span id="cb519-8"><a href="graf.html#cb519-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb519-9"><a href="graf.html#cb519-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="fl">2.5</span>,</span>
<span id="cb519-10"><a href="graf.html#cb519-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_fill</span>(<span class="fl">0.9</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-227-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Note que a estrutura da função <code>geom_text()</code> é quase idêntica para as três posições, apenas alterando alguns valores e especificações. Primeiramente, definimos na função <code>aes()</code> a variável utilizada para ilustrar as legendas, no caso, a <code>Valor</code>. Em seguida, definimos a cor da legenda, sendo definida como branca (<code>color = "white"</code>). O argumento <code>vjust =</code> ajusta o posicionamento vertical das legendas, tendo como referência cada uma das barras; nesse caso, faça os ajustes testando valores, sendo possível atribuir valores negativos, fazendo com que a legenda suba. Por fim, a função <code>position_</code>, contida no argumento <code>position =</code>, ajusta o posicionamento das legendas em cada um dos setores da barra, de acordo com o tipo de posição adotada no <code>geom_col()</code>, seja o <code>stack</code> (<code>position_stack()</code>), <code>dodge</code> (<code>position_dodge()</code>) ou <code>fill</code> (<code>position_fill()</code>).</p>
<p><br></p>
</div>
</div>
<div id="geom_bar" class="section level3 unnumbered">
<h3><code>geom_bar()</code></h3>
<p>A função <code>geom_bar()</code> constrói gráficos de barras a partir da contagem de valores presentes em uma variável categórica. Como exemplo, utilizaremos a base de dados <code>diamonds</code>, presente no prórprio pacote <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="graf.html#cb520-1" aria-hidden="true" tabindex="-1"></a>diamonds</span></code></pre></div>
<pre><code># A tibble: 53,940 x 10
   carat cut       color clarity depth table price     x     y     z
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
 7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
 8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
 9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
# ... with 53,930 more rows</code></pre>
<p>Essa <em>tibble</em> apresenta 53.940 observações e 10 variáveis, referentes às características de uma amostra de diamantes. Dessas variáveis, utilizaremos apenas a <code>cut</code>, que informa a qualidade de corte dos diamantes, sendo categorizadas em <code>Fair</code>, <code>Good</code>, <code>Very Good</code>, <code>Premium</code> e <code>Ideal</code>. Assim sendo, faremos um gráfico de barras que conta a quantidade de diamantes que se encaixam em cada uma dessas categorias.</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="graf.html#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds,</span>
<span id="cb522-2"><a href="graf.html#cb522-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> cut))<span class="sc">+</span></span>
<span id="cb522-3"><a href="graf.html#cb522-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-229-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que foi preciso informar apenas a variável categórica <code>cut</code> no eixo x, sendo o y construido, automaticamente, a partir da contagem dos diamantes que se encaixam nas respectivas categorias.</p>
<p>Podemos melhorar a apresentação do gráfico atribuindo cores às categorias. Para isso, utilizamos o argumento <code>fill</code> na função <code>aes()</code>.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="graf.html#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds,</span>
<span id="cb523-2"><a href="graf.html#cb523-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> cut,</span>
<span id="cb523-3"><a href="graf.html#cb523-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> cut))<span class="sc">+</span></span>
<span id="cb523-4"><a href="graf.html#cb523-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-230-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
<div id="coordenadas" class="section level4" number="7.2.0.4">
<h4><span class="header-section-number">7.2.0.4</span> Coordenadas</h4>
<p>O sistema de coordenadas padrão do <code>ggplot2</code> é o cartesiano, onde os eixo x e y atuam de maneira independente para determinar a localização de cada ponto. De maneira simples, podemos inverter os eixos x e y utilizando a função <code>coord_flip()</code>, assim, dispomos as barras no sentido horizontal. O exemplo a seguir ilustra o caso.</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="graf.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds,</span>
<span id="cb524-2"><a href="graf.html#cb524-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> cut,</span>
<span id="cb524-3"><a href="graf.html#cb524-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> cut))<span class="sc">+</span></span>
<span id="cb524-4"><a href="graf.html#cb524-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb524-5"><a href="graf.html#cb524-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-231-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Podemos utilizar outras coordenadas para contruir diferentes tipos de gráficos, como é o caso dos gráficos de setores, os quais veremos a seguir.</p>
<p><br></p>
</div>
</div>
</div>
<div id="gráfico-de-setores-pizza" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Gráfico de Setores (Pizza)</h2>
<p>Mais conhecido como gráfico de pizza, esse tipo gráfico é muito popular e simples de ser compreendido. Apesar disso, sua utilização deve ser cautelosa para não sobrecarregar em informação ou utilizá-lo de maneira inadequada. Normalmente, um gráfico de pizza visa representar a frequência relativa de valores, de acordo com uma variável categórica.</p>
<p>Para construí-lo no <code>ggplot2</code>, utilizamos do artifício <code>coord_polar()</code>, o qual altera a coordenada do gráfico de barras. A seguir, veremos uma demonstração com dados hipotéticos sobre o grau de instrução de indivíduos.</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="graf.html#cb525-1" aria-hidden="true" tabindex="-1"></a>educ <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb525-2"><a href="graf.html#cb525-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Instrucao =</span> <span class="fu">c</span>(<span class="st">&quot;Fundamental&quot;</span>, <span class="st">&quot;Médio&quot;</span>, <span class="st">&quot;Superior&quot;</span>),</span>
<span id="cb525-3"><a href="graf.html#cb525-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Quantidade =</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">200</span>, <span class="dv">60</span>),</span>
<span id="cb525-4"><a href="graf.html#cb525-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Porcentagem =</span> <span class="fu">round</span>((Quantidade<span class="sc">/</span><span class="fu">sum</span>(Quantidade)<span class="sc">*</span><span class="dv">100</span>),<span class="dv">2</span>)</span>
<span id="cb525-5"><a href="graf.html#cb525-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb525-6"><a href="graf.html#cb525-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb525-7"><a href="graf.html#cb525-7" aria-hidden="true" tabindex="-1"></a>educ</span></code></pre></div>
<pre><code># A tibble: 3 x 3
  Instrucao   Quantidade Porcentagem
  &lt;chr&gt;            &lt;dbl&gt;       &lt;dbl&gt;
1 Fundamental        150        36.6
2 Médio              200        48.8
3 Superior            60        14.6</code></pre>
<p>Assim, devemos proceder da seguinte maneira para construir o gráfico de setores:</p>
<p><strong>1. Montar o gráfico de barras:</strong> devemos deixar vazio o eixo x (<code>x = ""</code>), definir os valores percentuais no eixo y (<code>y = Porcentagem</code>) e preencher a barra com a variável categórica (<code>fill = Instrucao</code>). Feito isso, atribuímos a geometria de barras (<code>geom_col()</code>), colorindo suas bordas com a cor preta (<code>color = "black"</code>), a fim de delimitar os segmentos do gráfico;</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="graf.html#cb527-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> educ,</span>
<span id="cb527-2"><a href="graf.html#cb527-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb527-3"><a href="graf.html#cb527-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> Porcentagem,</span>
<span id="cb527-4"><a href="graf.html#cb527-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Instrucao))<span class="sc">+</span></span>
<span id="cb527-5"><a href="graf.html#cb527-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-233-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>2. Legendas:</strong> utilizamos a <code>geom_text()</code> para definir a legenda das porcentagens dentro de cada setor da barra. Dentro da função <code>aes()</code>, definimos como rótulo (<code>label =</code>) a variável <code>Porcentagem</code>, sendo que a função <code>paste(Porcentagem, "%")</code> insere o símbolo de <code>%</code> logo após os valores de porcentagem. Por último, o argumento <code>vjust = 0.5</code> ajusta a posição das legendas;</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="graf.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> educ,</span>
<span id="cb528-2"><a href="graf.html#cb528-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb528-3"><a href="graf.html#cb528-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> Porcentagem,</span>
<span id="cb528-4"><a href="graf.html#cb528-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Instrucao))<span class="sc">+</span></span>
<span id="cb528-5"><a href="graf.html#cb528-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb528-6"><a href="graf.html#cb528-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(Porcentagem, <span class="st">&quot;%&quot;</span>)),</span>
<span id="cb528-7"><a href="graf.html#cb528-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-234-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>3. Coordenada:</strong> nesse ponto, utilizamos a função <code>coord_polar()</code> para tornar nosso gráfico redondo. O argumento <code>theta = "y"</code> indica que o eixo y deve ser adotado como referência para a alteração da coordenada e o <code>start =</code> indica por qual valor o gráfico deve começar (teste outro valores para ver a diferença);</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="graf.html#cb529-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> educ,</span>
<span id="cb529-2"><a href="graf.html#cb529-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb529-3"><a href="graf.html#cb529-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> Porcentagem,</span>
<span id="cb529-4"><a href="graf.html#cb529-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Instrucao))<span class="sc">+</span></span>
<span id="cb529-5"><a href="graf.html#cb529-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb529-6"><a href="graf.html#cb529-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(Porcentagem, <span class="st">&quot;%&quot;</span>)),</span>
<span id="cb529-7"><a href="graf.html#cb529-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>))<span class="sc">+</span></span>
<span id="cb529-8"><a href="graf.html#cb529-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb529-9"><a href="graf.html#cb529-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">start =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-235-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>4. Retirar elementos:</strong> neste ponto, já temos um gráfico de pizza, porém poluído devido a presença das escalas, nome dos eixos e cor de fundo inadequada. Para alterar o fundo cinza para um branco, escolhemos o tema <code>theme_minimal()</code>. Em seguida, na função <code>theme()</code>, atribuímos a alguns argumentos o <code>element_blank()</code>, ou seja, função que retira os elementos de cena. Portanto, o <code>axis.title = element_blank()</code> retira os nomes dos eixos, o <code>axis.text = element_blank()</code> exclui o restante de texto presente no gráfico e o <code>panel.grid = element_blank()</code> omite o restante das linhas gráficas.</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="graf.html#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> educ,</span>
<span id="cb530-2"><a href="graf.html#cb530-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb530-3"><a href="graf.html#cb530-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> Porcentagem,</span>
<span id="cb530-4"><a href="graf.html#cb530-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Instrucao))<span class="sc">+</span></span>
<span id="cb530-5"><a href="graf.html#cb530-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb530-6"><a href="graf.html#cb530-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(Porcentagem, <span class="st">&quot;%&quot;</span>)),</span>
<span id="cb530-7"><a href="graf.html#cb530-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>))<span class="sc">+</span></span>
<span id="cb530-8"><a href="graf.html#cb530-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb530-9"><a href="graf.html#cb530-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">start =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb530-10"><a href="graf.html#cb530-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb530-11"><a href="graf.html#cb530-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb530-12"><a href="graf.html#cb530-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb530-13"><a href="graf.html#cb530-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb530-14"><a href="graf.html#cb530-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb530-15"><a href="graf.html#cb530-15" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-236-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>5. Personalização:</strong> agora temos um gráfico de pizza autêntico. Podemos realizar mais algumas modificações estéticas, como definir uma paleta de cores com a <code>scale_fill_brewer()</code> e ajustar o nome na legenda com o <code>labs()</code>.</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="graf.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> educ,</span>
<span id="cb531-2"><a href="graf.html#cb531-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb531-3"><a href="graf.html#cb531-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> Porcentagem,</span>
<span id="cb531-4"><a href="graf.html#cb531-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Instrucao))<span class="sc">+</span></span>
<span id="cb531-5"><a href="graf.html#cb531-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb531-6"><a href="graf.html#cb531-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(Porcentagem, <span class="st">&quot;%&quot;</span>)),</span>
<span id="cb531-7"><a href="graf.html#cb531-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>))<span class="sc">+</span></span>
<span id="cb531-8"><a href="graf.html#cb531-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb531-9"><a href="graf.html#cb531-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">start =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb531-10"><a href="graf.html#cb531-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb531-11"><a href="graf.html#cb531-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb531-12"><a href="graf.html#cb531-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb531-13"><a href="graf.html#cb531-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb531-14"><a href="graf.html#cb531-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb531-15"><a href="graf.html#cb531-15" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb531-16"><a href="graf.html#cb531-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>)<span class="sc">+</span></span>
<span id="cb531-17"><a href="graf.html#cb531-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Grau de Instrução&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-237-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="gráfico-de-linhas" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Gráfico de Linhas</h2>
<p>Os gráficos de linhas são muito utilizados para representar séries temporais, ou seja, a progressão de valores ao longo do tempo. Utilizamos a função <code>geom_line()</code> para construí-los. Para exemplificação, utilizaremos os dados de produtividade de milho entre 1961 e 2019, disponíveis no arquivo <code>produtiv_milho.csv</code>.</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="graf.html#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb532-2"><a href="graf.html#cb532-2" aria-hidden="true" tabindex="-1"></a>produtiv_milho <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;dados_ggplot2/produtiv_milho.csv&quot;</span>)</span>
<span id="cb532-3"><a href="graf.html#cb532-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb532-4"><a href="graf.html#cb532-4" aria-hidden="true" tabindex="-1"></a>produtiv_milho</span></code></pre></div>
<pre><code># A tibble: 236 x 3
   Local    Ano Valor
   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 Brasil  1961  1.31
 2 Brasil  1962  1.30
 3 Brasil  1963  1.31
 4 Brasil  1964  1.16
 5 Brasil  1965  1.38
 6 Brasil  1966  1.31
 7 Brasil  1967  1.38
 8 Brasil  1968  1.34
 9 Brasil  1969  1.31
10 Brasil  1970  1.44
# ... with 226 more rows</code></pre>
<p>A base de dados apresenta 236 observações e 3 variáveis. A variável <code>Local</code> possui os países Brasil, China, Índia e Estado Unidos; a <code>Ano</code> dispõe de dados entre 1961 e 2019; e <code>Valor</code> representa a produtividade da cultura do milho, em toneladas por hectare.</p>
<p>Para o primeiro exemplo, utilizaremos apenas os dados referentes ao Brasil. Para isso, utilizaremos a função <code>dplyr::filter</code>, do pacote <code>dplyr</code>.</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="graf.html#cb534-1" aria-hidden="true" tabindex="-1"></a>produtiv_br <span class="ot">&lt;-</span> produtiv_milho <span class="sc">%&gt;%</span> </span>
<span id="cb534-2"><a href="graf.html#cb534-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Local <span class="sc">==</span> <span class="st">&quot;Brasil&quot;</span>)</span>
<span id="cb534-3"><a href="graf.html#cb534-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb534-4"><a href="graf.html#cb534-4" aria-hidden="true" tabindex="-1"></a>produtiv_br</span></code></pre></div>
<pre><code># A tibble: 59 x 3
   Local    Ano Valor
   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 Brasil  1961  1.31
 2 Brasil  1962  1.30
 3 Brasil  1963  1.31
 4 Brasil  1964  1.16
 5 Brasil  1965  1.38
 6 Brasil  1966  1.31
 7 Brasil  1967  1.38
 8 Brasil  1968  1.34
 9 Brasil  1969  1.31
10 Brasil  1970  1.44
# ... with 49 more rows</code></pre>
<p>Portanto, o objeto <code>produtiv_br</code> possui apenas o país Brasil, apresentando 59 observações e 3 variáveis.</p>
<p>Para construir o gráfico de linhas, atribuiremos ao eixo x a variável <code>Ano</code> e ao eixo y, a variável <code>Valor</code>, além de definir a geometria de linha, ou seja, a <code>geom_line()</code>.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="graf.html#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_br)<span class="sc">+</span></span>
<span id="cb536-2"><a href="graf.html#cb536-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb536-3"><a href="graf.html#cb536-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> Valor))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-240-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
<div id="cores-2" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Cores</h3>
<p>Podemos definir a cor da linha de maneira manual, utilizando o argumento <code>color =</code>. Porém, devemos nos atentar a alguns detalhes.</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="graf.html#cb537-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_br)<span class="sc">+</span></span>
<span id="cb537-2"><a href="graf.html#cb537-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb537-3"><a href="graf.html#cb537-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> Valor,</span>
<span id="cb537-4"><a href="graf.html#cb537-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-241-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que o argumento <code>color = "blue"</code> nos retornou uma linha de coloração vermelha e não azul. Isto aconteceu pois o argumento foi colocado dentro da função <code>aes()</code> e esta espera uma coluna do banco de dados para mapear, assim, o valor <code>"blue"</code> é tratado como uma nova variável pertencente a todas as observações. Portanto, a linha é colorida de vermelho (padrão do <code>ggplot2</code>) associada à nova categoria “<em>blue</em>”.</p>
<p>Portanto, para colorirmos a linha de azul, devemos colocar o atributo <code>color =</code> fora da função <code>aes()</code>.</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="graf.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_br)<span class="sc">+</span></span>
<span id="cb538-2"><a href="graf.html#cb538-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb538-3"><a href="graf.html#cb538-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> Valor),</span>
<span id="cb538-4"><a href="graf.html#cb538-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-242-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="tamanho-1" class="section level3" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Tamanho</h3>
<p>Para alterarmos o tamanho da linha, utilizamos o argumento <code>size =</code>. Agora que aprendemos com o exemplo anterior, devemos colocá-lo fora da função <code>aes()</code>.</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="graf.html#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_br)<span class="sc">+</span></span>
<span id="cb539-2"><a href="graf.html#cb539-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb539-3"><a href="graf.html#cb539-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> Valor),</span>
<span id="cb539-4"><a href="graf.html#cb539-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb539-5"><a href="graf.html#cb539-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-243-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="geometrias" class="section level3" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Geometrias</h3>
<p>Nos gráficos de linhas, podemos mesclar diversas geometrias. A seguir, demonstraremos alguns exemplos.</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="graf.html#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_br,</span>
<span id="cb540-2"><a href="graf.html#cb540-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb540-3"><a href="graf.html#cb540-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor))<span class="sc">+</span></span>
<span id="cb540-4"><a href="graf.html#cb540-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb540-5"><a href="graf.html#cb540-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-244-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Aqui, podemos ver a associação do gráfico de linhas com o gráfico de pontos. Perceba que a estética (<code>aes()</code>) foi definida na função <code>ggplot()</code>, servindo tanto para o <code>geom_line()</code>, como para o <code>geom_point()</code>.</p>
<p><br></p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="graf.html#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb541-2"><a href="graf.html#cb541-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb541-3"><a href="graf.html#cb541-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor))<span class="sc">+</span></span>
<span id="cb541-4"><a href="graf.html#cb541-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Local),</span>
<span id="cb541-5"><a href="graf.html#cb541-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb541-6"><a href="graf.html#cb541-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">group =</span> Local),</span>
<span id="cb541-7"><a href="graf.html#cb541-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb541-8"><a href="graf.html#cb541-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb541-9"><a href="graf.html#cb541-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-245-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Agora, utilizando a base de dados <code>produtiv_milho</code>, unimos os quatro países em um mesmo gráfico. Designamos a variável <code>Local</code> (ou seja, os países) ao argumento <code>color =</code> para distingui-los com cores diferentes. Por se tratar de uma variável do nosso banco de dados, colocamos o argumento dentro da função <code>aes()</code>, contida na <code>geom_line()</code>. A outra camada geométrica é referente a reta de regressão, onde agrupamos a variável <code>Local</code> para que fosse possível traçar uma linha de regressão linear para cada variável.</p>
<p><br></p>
</div>
<div id="formatos-1" class="section level3" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> Formatos</h3>
<p>Também podemos diferenciar variáveis pelo formato das linhas, aplicando o argumento <code>linetype =</code> dentro da função <code>aes()</code>.</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="graf.html#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb542-2"><a href="graf.html#cb542-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb542-3"><a href="graf.html#cb542-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb542-4"><a href="graf.html#cb542-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> Local))<span class="sc">+</span></span>
<span id="cb542-5"><a href="graf.html#cb542-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-246-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ademais, poderiamos associar formatos e cores em um mesmo gráfico, a fim de diferenciar as variáveis.</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="graf.html#cb543-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb543-2"><a href="graf.html#cb543-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb543-3"><a href="graf.html#cb543-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb543-4"><a href="graf.html#cb543-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local,</span>
<span id="cb543-5"><a href="graf.html#cb543-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> Local))<span class="sc">+</span></span>
<span id="cb543-6"><a href="graf.html#cb543-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-247-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="escalas" class="section level3" number="7.4.5">
<h3><span class="header-section-number">7.4.5</span> Escalas</h3>
<p>A família de funções <code>scale_</code> confere propriedades para mudar as escalas de gráficos, cada qual com funções específicas. A seguir demonstraremos algumas delas.</p>
<div id="eixos" class="section level4 unnumbered">
<h4>Eixos</h4>
<p>Para quebrarmos (<code>breaks =</code>) as escalas dos eixos <code>x</code> e <code>y</code> e redefinirmos outra sequência (<code>seq()</code>), utilizamos as funções <code>scale_x_continuous()</code> e <code>scale_y_continuous()</code>. Como fatores do argumento <code>seq()</code>, definimos o limite inferior (<code>from =</code>), o limite superior (<code>to =</code>) e a sequência da escala (<code>by =</code>).</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="graf.html#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb544-2"><a href="graf.html#cb544-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb544-3"><a href="graf.html#cb544-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb544-4"><a href="graf.html#cb544-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local))<span class="sc">+</span></span>
<span id="cb544-5"><a href="graf.html#cb544-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb544-6"><a href="graf.html#cb544-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1961</span>, <span class="at">to =</span> <span class="dv">2019</span>, <span class="at">by =</span> <span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb544-7"><a href="graf.html#cb544-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">12</span>, <span class="at">by =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-248-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perceba que, no eixo x, os anos ficaram apertados e mal apresentados. Para melhorar sua aparência, podemos alterar a angulação do texto (<code>angle =</code>) com o argumento <code>axis.text.x = element_text()</code>, dentro da função <code>theme()</code>.</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="graf.html#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb545-2"><a href="graf.html#cb545-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb545-3"><a href="graf.html#cb545-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb545-4"><a href="graf.html#cb545-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local))<span class="sc">+</span></span>
<span id="cb545-5"><a href="graf.html#cb545-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb545-6"><a href="graf.html#cb545-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1961</span>, <span class="at">to =</span> <span class="dv">2019</span>, <span class="at">by =</span> <span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb545-7"><a href="graf.html#cb545-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">12</span>, <span class="at">by =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb545-8"><a href="graf.html#cb545-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">45</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-249-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ainda podemos inserir uma segunda escala aos nossos gráficos, utilizando a função <code>scale_y_continuous()</code>. Uma segunda escala é útil para representar, em um mesmo gráfico, variáveis que apresentem escala numérica diferente. Como exemplo, utilizaremos a base de dados sobre o PIB do Brasil, disponível no arquivo <code>pib_br.csv</code>.</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="graf.html#cb546-1" aria-hidden="true" tabindex="-1"></a>pib_br <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;dados_ggplot2/pib_br.csv&quot;</span>)</span>
<span id="cb546-2"><a href="graf.html#cb546-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-3"><a href="graf.html#cb546-3" aria-hidden="true" tabindex="-1"></a>pib_br</span></code></pre></div>
<pre><code># A tibble: 18 x 3
     ano var_anual  valor
   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1  2000      2.8   3722.
 2  2001     -0.09  3155.
 3  2002      1.29  2842.
 4  2003     -0.15  3063.
 5  2004      4.34  3623.
 6  2005      2     4770.
 7  2006      2.81  5860.
 8  2007      4.95  7314.
 9  2008      4.03  8788.
10  2009     -1.11  8553.
11  2010      6.49 11224.
12  2011      2.99 13167.
13  2012      0.97 12292.
14  2013      2.06 12217.
15  2014     -0.38 12027.
16  2015     -4.59  8750.
17  2016     -4.25  8645.
18  2017      0.2   9812.</code></pre>
<p>A <em>tibble</em> apresenta 18 observações e 3 variáveis, sendo elas o <code>ano</code>, entre 2000 e 2019; a variação anual do PIB (<code>var_anual</code>); e o valor bruto do PIB, em US$ (<code>valor</code>).</p>
<p>Primeiramente, plotaremos uma variável por vez, a fim de observarmos a escala do eixo y de cada uma, começando pela variação anual do PIB.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="graf.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pib_br,</span>
<span id="cb548-2"><a href="graf.html#cb548-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>ano))<span class="sc">+</span></span>
<span id="cb548-3"><a href="graf.html#cb548-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> var_anual,</span>
<span id="cb548-4"><a href="graf.html#cb548-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> var_anual<span class="sc">&gt;</span><span class="dv">0</span>),</span>
<span id="cb548-5"><a href="graf.html#cb548-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb548-6"><a href="graf.html#cb548-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb548-7"><a href="graf.html#cb548-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-251-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Para preencher as barras com cores, utilizamos o critério no qual valores positivos recebem uma cor e negativos, outra cor. Perceba que a escala da variação anual do PIB varia entre, aproximadamente, -5 e 6.</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="graf.html#cb549-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pib_br,</span>
<span id="cb549-2"><a href="graf.html#cb549-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>ano))<span class="sc">+</span></span>
<span id="cb549-3"><a href="graf.html#cb549-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> (valor)))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-252-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Já no gráfico referente ao valor bruto do PIB, a escala varia entre 2.500 e 13.000.</p>
<p>Assim, para unirmos ambas as medidas, precisaremos criar duas escalas no eixo y. Para isso, precisamos redefinir a escala da variável <code>valor</code>. A tática a ser utilizada será dividir os valores pelo menor valor apresentado na variável referente à variação anual do PIB.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="graf.html#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pib_br,</span>
<span id="cb550-2"><a href="graf.html#cb550-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>ano))<span class="sc">+</span></span>
<span id="cb550-3"><a href="graf.html#cb550-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> var_anual,</span>
<span id="cb550-4"><a href="graf.html#cb550-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> var_anual<span class="sc">&gt;</span><span class="dv">0</span>),</span>
<span id="cb550-5"><a href="graf.html#cb550-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb550-6"><a href="graf.html#cb550-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb550-7"><a href="graf.html#cb550-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb550-8"><a href="graf.html#cb550-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> (valor<span class="sc">/</span><span class="dv">2842</span>)))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-253-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Dessa maneira, conseguimos representar ambas as variáveis em um mesmo gráfico. Contudo, precisamos definir um novo eixo y, a fim de representarmos os valores da variável <code>var_anual</code>. Para isso, utilizaremos a função <code>scale_y_continuous()</code>.</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="graf.html#cb551-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pib_br,</span>
<span id="cb551-2"><a href="graf.html#cb551-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>ano))<span class="sc">+</span></span>
<span id="cb551-3"><a href="graf.html#cb551-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> var_anual,</span>
<span id="cb551-4"><a href="graf.html#cb551-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> var_anual<span class="sc">&gt;</span><span class="dv">0</span>),</span>
<span id="cb551-5"><a href="graf.html#cb551-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb551-6"><a href="graf.html#cb551-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb551-7"><a href="graf.html#cb551-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb551-8"><a href="graf.html#cb551-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> (valor<span class="sc">/</span><span class="dv">2842</span>)))<span class="sc">+</span></span>
<span id="cb551-9"><a href="graf.html#cb551-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">4.0</span>, <span class="fl">6.0</span>, <span class="at">by =</span> <span class="dv">2</span>),</span>
<span id="cb551-10"><a href="graf.html#cb551-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="at">trans =</span> <span class="sc">~</span>. <span class="sc">*</span><span class="dv">2842</span>,</span>
<span id="cb551-11"><a href="graf.html#cb551-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">name =</span> <span class="st">&quot;US$&quot;</span>,</span>
<span id="cb551-12"><a href="graf.html#cb551-12" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="at">by =</span> <span class="dv">4000</span>)))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-254-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Na função <code>scale_y_continuous()</code>, o primeiro argumento (<code>breaks =</code>) trata de redefinir a escala da variável <code>var_anual</code>. Posteriormente, o <code>sec.axis =</code> lida com a criação do segundo eixo y para representar a escala referente ao valor bruto do PIB brasileiro. Essa segunda escala toma como base os valores da escala primária do eixo y. O primeiro argumento é o <code>trans =</code>, que recebe uma fórmula, a fim de realizar uma operação matemática para alterar a escala do eixo y secundário. No nosso exemplo, multiplicaremos pelo valor <code>2842</code>, o mesmo o qual dividimos anteriomente os valores do PIB bruto, para representar ambas as variáveis em um mesmo gráfico. Em seguida, nomeamos a nova escala com o argumento <code>names =</code> e definimos sua escala com <code>breaks =</code>.</p>
<p>Por fim, podemos realizar mais alguns incrementos ao gráfico para deixá-lo mais apresentável.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="graf.html#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pib_br,</span>
<span id="cb552-2"><a href="graf.html#cb552-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>ano))<span class="sc">+</span></span>
<span id="cb552-3"><a href="graf.html#cb552-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> var_anual,</span>
<span id="cb552-4"><a href="graf.html#cb552-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> var_anual<span class="sc">&gt;</span><span class="dv">0</span>),</span>
<span id="cb552-5"><a href="graf.html#cb552-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb552-6"><a href="graf.html#cb552-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb552-7"><a href="graf.html#cb552-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.7</span>)<span class="sc">+</span></span>
<span id="cb552-8"><a href="graf.html#cb552-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb552-9"><a href="graf.html#cb552-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> (valor<span class="sc">/</span><span class="dv">2842</span>)),</span>
<span id="cb552-10"><a href="graf.html#cb552-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.2</span>)<span class="sc">+</span></span>
<span id="cb552-11"><a href="graf.html#cb552-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;%&quot;</span>,</span>
<span id="cb552-12"><a href="graf.html#cb552-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">4.0</span>, <span class="fl">6.0</span>, <span class="at">by =</span> <span class="dv">2</span>),</span>
<span id="cb552-13"><a href="graf.html#cb552-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="at">trans =</span> <span class="sc">~</span>. <span class="sc">*</span><span class="dv">2842</span>,</span>
<span id="cb552-14"><a href="graf.html#cb552-14" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">name =</span> <span class="st">&quot;US$&quot;</span>,</span>
<span id="cb552-15"><a href="graf.html#cb552-15" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="at">by =</span> <span class="dv">4000</span>)))<span class="sc">+</span></span>
<span id="cb552-16"><a href="graf.html#cb552-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb552-17"><a href="graf.html#cb552-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2000</span>, <span class="dv">2019</span>, <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb552-18"><a href="graf.html#cb552-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb552-19"><a href="graf.html#cb552-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">25</span>))  </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-255-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Esse exemplo representa um gráfico mais completo e de nível mais avançado. Caso não tenha entendido algum passo, rode o código por camada, para acompanhar a progressão de construção do gráfico e entender a lógica por trás.</p>
</div>
<div id="cores-3" class="section level4 unnumbered">
<h4>Cores</h4>
<p>Para mudarmos as escalas de cores, utilizamos a <code>scale_color_</code> e <code>scale_fill_</code>.</p>
<p>Para alterá-las manualmente, utiliza-se as funções <code>scale_color_manual()</code> e <code>scale_fill_manual</code>, tendo como argumento o <code>values =</code>, que recebe um vetor com o nome das cores, cuja ordem no vetor diz respeito à ordem das variáveis às quais se quer atribuir tais cores.</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="graf.html#cb553-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb553-2"><a href="graf.html#cb553-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb553-3"><a href="graf.html#cb553-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb553-4"><a href="graf.html#cb553-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local))<span class="sc">+</span></span>
<span id="cb553-5"><a href="graf.html#cb553-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb553-6"><a href="graf.html#cb553-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;chocolate&quot;</span>, <span class="st">&quot;cyan3&quot;</span>, <span class="st">&quot;bisque4&quot;</span>, <span class="st">&quot;chartreuse4&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-256-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A figura <a href="graf.html#fig:cornome">7.4</a> mostra os nomes das possíveis cores.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:cornome"></span>
<img src="imagens/nome_cor.png" alt="Nome das possíveis cores a serem definidas para os gráficos. Fonte: *The R Graph Gallery.*" width="80%" />
<p class="caption">
Figure 7.4: Nome das possíveis cores a serem definidas para os gráficos. Fonte: <em>The R Graph Gallery.</em>
</p>
</div>
<p>Também, podemos alterar as colorações a partir de paletas de cores pré-definidas, utilizando a função <code>scale_color_brewer()</code>, tendo como argumento a <code>palette =</code>.</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="graf.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb554-2"><a href="graf.html#cb554-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Ano,</span>
<span id="cb554-3"><a href="graf.html#cb554-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb554-4"><a href="graf.html#cb554-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local))<span class="sc">+</span></span>
<span id="cb554-5"><a href="graf.html#cb554-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb554-6"><a href="graf.html#cb554-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>)<span class="sc">+</span></span>
<span id="cb554-7"><a href="graf.html#cb554-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-257-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A figura <a href="graf.html#fig:paleta">7.5</a> mostra as possíveis paletas de cores.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:paleta"></span>
<img src="imagens/paleta_cor.png" alt="Nome das paletas de cores disponíveis para aplicarmos em nossos gráficos. Fonte: *The R Graph Gallery*." width="50%" />
<p class="caption">
Figure 7.5: Nome das paletas de cores disponíveis para aplicarmos em nossos gráficos. Fonte: <em>The R Graph Gallery</em>.
</p>
</div>
<p>Caso queira saber mais sobre as escalas de cores existentes no R, confira o post do site <em>The R Graph Gallery</em>: <a href="https://www.r-graph-gallery.com/ggplot2-color.html">Dealing with colors in ggplot2</a>.</p>
</div>
<div id="rótulos" class="section level4 unnumbered">
<h4>Rótulos</h4>
<p>Para trocar o nome das categorias na legenda, usa-se <code>scale_"argumento"_discrete()</code>, junto ao argumento <code>labels</code>. A seguir, citamos algumas das possibilidades:</p>
<ul>
<li><p><code>scale_color_discrete()</code>: para alterar o nome das variáveis contidas no argumento <code>color</code>;</p></li>
<li><p><code>scale_fill_discrete()</code>: para alterar o nome das variáveis contidas no argumento <code>fill</code>;</p></li>
<li><p><code>scale_alpha_discrete()</code>: para alterar o nome das variáveis contidas no argumento <code>alpha</code>;</p></li>
<li><p><code>scale_size_discrete()</code>: para alterar o nome das variáveis contidas no argumento <code>size</code>.</p></li>
</ul>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="graf.html#cb555-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(produtiv_milho, </span>
<span id="cb555-2"><a href="graf.html#cb555-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span>Ano,</span>
<span id="cb555-3"><a href="graf.html#cb555-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Valor,</span>
<span id="cb555-4"><a href="graf.html#cb555-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Local))<span class="sc">+</span></span>
<span id="cb555-5"><a href="graf.html#cb555-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb555-6"><a href="graf.html#cb555-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;BR&quot;</span>, <span class="st">&quot;CHI&quot;</span>, <span class="st">&quot;IND&quot;</span>, <span class="st">&quot;EUA&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-258-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
</div>
</div>
<div id="gráficos-de-medidas-resumo" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Gráficos de medidas-resumo</h2>
<p>Voltemos aos dados dos alunos de Estatística Aplicada para fazermos alguns gráficos de medidas-resumo, importantes para observarmos a distribuição de valores.</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="graf.html#cb556-1" aria-hidden="true" tabindex="-1"></a>dados_alunos</span></code></pre></div>
<pre><code># A tibble: 64 x 7
   sexo  idade altura  peso horas_estudo media_ponderada futuro   
   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt; &lt;chr&gt;    
 1 M        23   1.75    80            2             7.5 academico
 2 F        19   1.67    65            2             8.3 mercado  
 3 M        19   1.7     90            3             6.9 mercado  
 4 M        22   1.73    87            3             7.1 academico
 5 M        19   1.83    71            2             6.5 mercado  
 6 M        19   1.8     80            3             8.6 mercado  
 7 M        20   1.9     90            2             7.8 academico
 8 F        20   1.6     55            1             8   mercado  
 9 F        24   1.62    55            2             8.2 academico
10 F        18   1.64    60            2             7.3 mercado  
# ... with 54 more rows</code></pre>
<div id="histogramas" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Histogramas</h3>
<p>Neste primeiro caso, faremos um histograma referente à média ponderada dos alunos. Esse tipo de gráfico é útil para verificar a frequência de uma variável e a sua distribuição.</p>
<p>Para isso, utilizamos a função <code>geom_histogram()</code>, sendo necessário indicar somente o atributo <code>x =</code>, pois o eixo y será construído, automaticamente, a partir da contagem dos valores correspondentes às variáveis <code>x</code>.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="graf.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos)<span class="sc">+</span></span>
<span id="cb558-2"><a href="graf.html#cb558-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> media_ponderada))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-260-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Por padrão, a função define que o histograma apresenta 30 intervalos. Porém, este número não é o ideal para representar os nossos dados. Para redefini-lo, utilizamos o argumento <code>bins</code>.</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="graf.html#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos)<span class="sc">+</span></span>
<span id="cb559-2"><a href="graf.html#cb559-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> media_ponderada),</span>
<span id="cb559-3"><a href="graf.html#cb559-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">8</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-261-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Podemos melhorar a aparência do histograma utilizando os argumentos <code>color =</code>, para colorir as bordas das barras, e o <code>fill =</code>, para colorir o seu interior.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="graf.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos)<span class="sc">+</span></span>
<span id="cb560-2"><a href="graf.html#cb560-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> media_ponderada),</span>
<span id="cb560-3"><a href="graf.html#cb560-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">8</span>, </span>
<span id="cb560-4"><a href="graf.html#cb560-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb560-5"><a href="graf.html#cb560-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;light blue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-262-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="gráfico-de-densidade" class="section level3" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Gráfico de densidade</h3>
<p>A construção do gráfico de densidade é semelhante ao histograma. Utilizamos a função <code>geom_density()</code>, atribuindo apenas uma variável contínua ao eixo x, sendo o eixo y construído automaticamente, de acordo com os valores da variável do eixo x. Ademais, podemos preencher seu interior com o argumento <code>fill =</code> e alterar a transparência da cor com o argumento <code>alpha</code>, cuja escala vai de 0 a 1, sendo 0 o valor máximo de transparência.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="graf.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb561-2"><a href="graf.html#cb561-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> media_ponderada))<span class="sc">+</span></span>
<span id="cb561-3"><a href="graf.html#cb561-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;light green&quot;</span>,</span>
<span id="cb561-4"><a href="graf.html#cb561-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-263-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Podemos representar mais de uma densidade em um mesmo gráfico. Basta atribuir uma variável categórica ao argumento <code>fill =</code> ou <code>color =</code>, a fim de distinguir as densidades.</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="graf.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb562-2"><a href="graf.html#cb562-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb562-3"><a href="graf.html#cb562-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> sexo))<span class="sc">+</span></span>
<span id="cb562-4"><a href="graf.html#cb562-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-264-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="boxplot" class="section level3" number="7.5.3">
<h3><span class="header-section-number">7.5.3</span> Boxplot</h3>
<p>Por fim, temos o boxplot, muito útil para observarmos a distribuição de valores de uma variável. Para fazermos os boxplots, utilizamos a função <code>geom_boxplot()</code>.</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="graf.html#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb563-2"><a href="graf.html#cb563-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> media_ponderada))<span class="sc">+</span></span>
<span id="cb563-3"><a href="graf.html#cb563-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-265-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nesse primeiro caso, fizemos um boxplot da média ponderada dos alunos, atribuindo os valores da variável no eixo y. Para conferir os valores dos quartis, além da amplitude, podemos utilizar a função <code>summary()</code>. Para calcular a distância interquartil - cujo cálculo se dá pela subtração entre o valor do 3º quartil e do 1º quartil - utilizamos a função <code>IQR()</code>.</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="graf.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dados_alunos<span class="sc">$</span>media_ponderada)</span></code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  5.000   7.000   7.400   7.425   8.000   8.700 </code></pre>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="graf.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(dados_alunos<span class="sc">$</span>media_ponderada)</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>Podemos incluir outras variáveis ao nosso boxplot, como, por exemplo, a variável <code>futuro</code>.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="graf.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb568-2"><a href="graf.html#cb568-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> futuro,</span>
<span id="cb568-3"><a href="graf.html#cb568-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> media_ponderada))<span class="sc">+</span></span>
<span id="cb568-4"><a href="graf.html#cb568-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-267-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Neste caso, podemos ver a distribuição da média ponderada dos alunos e alunas de acordo com as perspectivas futuras de cada um. Perceba que a variável categórica <code>futuro</code> foi atribuída ao eixo x.</p>
<p>Agora, caso se queira dividir os boxplots anteriores de acordo com o sexo, podemos atribui-la ao argumento <code>fill</code>.</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="graf.html#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb569-2"><a href="graf.html#cb569-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> futuro,</span>
<span id="cb569-3"><a href="graf.html#cb569-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> media_ponderada,</span>
<span id="cb569-4"><a href="graf.html#cb569-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> sexo))<span class="sc">+</span></span>
<span id="cb569-5"><a href="graf.html#cb569-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-268-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Assim, podemos observar a distribuição das médias ponderadas de acordo com o sexo e a perspectiva futura.</p>
<p><br></p>
</div>
</div>
<div id="juntar-gráficos-diferentes" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Juntar gráficos diferentes</h2>
<p>Temos a possibilidade de juntar gráficos diferentes em uma mesma apresentação. Para isso, utilizamos o pacote <code>patchwork</code>.</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="graf.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;patchwork&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="graf.html#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code></pre></div>
<p>O pacote funciona de maneira bem simples. Para juntarmos gráficos, devemos salvá-los em um objeto e, posteriomente, uni-los com um sinal de <code>+</code>. Veja o exemplo a seguir:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="graf.html#cb572-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot salvo no objeto &quot;g1&quot;</span></span>
<span id="cb572-2"><a href="graf.html#cb572-2" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb572-3"><a href="graf.html#cb572-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> futuro,</span>
<span id="cb572-4"><a href="graf.html#cb572-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> media_ponderada,</span>
<span id="cb572-5"><a href="graf.html#cb572-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> sexo))<span class="sc">+</span></span>
<span id="cb572-6"><a href="graf.html#cb572-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb572-7"><a href="graf.html#cb572-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb572-8"><a href="graf.html#cb572-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de densidade salvo no objeto &quot;g2&quot;</span></span>
<span id="cb572-9"><a href="graf.html#cb572-9" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados_alunos,</span>
<span id="cb572-10"><a href="graf.html#cb572-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> altura,</span>
<span id="cb572-11"><a href="graf.html#cb572-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> sexo))<span class="sc">+</span></span>
<span id="cb572-12"><a href="graf.html#cb572-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span>
<span id="cb572-13"><a href="graf.html#cb572-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb572-14"><a href="graf.html#cb572-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Unindo os gráficos &quot;g1&quot; e &quot;g2&quot;</span></span>
<span id="cb572-15"><a href="graf.html#cb572-15" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> g2</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-271-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Podemos dispô-los um embaixo do outro com o operador <code>/</code>.</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="graf.html#cb573-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">/</span> g2</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-272-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Além disso, podemos inserir mais gráficos ao conjunto. Nesse caso, incluiremos o histograma.</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="graf.html#cb574-1" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados_alunos)<span class="sc">+</span></span>
<span id="cb574-2"><a href="graf.html#cb574-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> media_ponderada),</span>
<span id="cb574-3"><a href="graf.html#cb574-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">8</span>, </span>
<span id="cb574-4"><a href="graf.html#cb574-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb574-5"><a href="graf.html#cb574-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;light blue&quot;</span>)</span>
<span id="cb574-6"><a href="graf.html#cb574-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb574-7"><a href="graf.html#cb574-7" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> g3</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-273-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="graf.html#cb575-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> (g2 <span class="sc">/</span> g3)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-274-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Assim, dependendo da combinação de operações entre objetos, a partir do pacote <code>patchwork</code>, é possível dispor os gráficos de diferentes formas.</p>
<p><br></p>
<p>Como visto ao longo deste capítulo, percebemos que o pacote <code>ggplot2</code> possui ferramentas poderosas e versáteis para lidar com gráficos. Há diversas outras funcionalidades presentes no pacote, as quais podem (e devem) ser exploradas. Contudo, neste primeiro momento, o que foi exposto se apresenta como uma base para possibilitar a execução dos primeiros gráficos em R, além de ser a porta de entrada ao leitor para que possa aprofundar e aprimorar seus gráficos de maneira mais independente.</p>
<p>Para os leitores que desejam aprofundar o conhecimento no pacote <code>ggplot2</code>, deixo como recomendação alguns livros, todos disponíveis gratuitamente na <em>web</em>:</p>
<ul>
<li><p><a href="https://r-graphics.org/">R Graphics Cookbook</a> - Winston Chang;</p></li>
<li><p><a href="https://ggplot2-book.org/">ggplot2: Elegant Graphics for Data Analysis</a> - Hadley Wickham;</p></li>
<li><p><a href="https://bookdown.org/content/b298e479-b1ab-49fa-b83d-a57c2b034d49/">R Gallery Book</a> - Kyle W. Brown.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="trans.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mapas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
